{"version":3,"file":"58988985e749fbe1.js","mappings":"4JAcO,SAASA,EAASC,GACvB,MAAMC,EAAKD,EAAOE,aAAe,KAC3BC,EAAOH,EAAOE,aAAe,KAC7BE,EAAWJ,EAAOE,aAAe,KACjCG,EAAUL,EAAOM,WAAa,EACpC,OAAU,MAANL,EACK,CAAEA,KAAIE,OAAMC,WAAUC,WAEtB,CAAEJ,KAAIE,OAAMC,WAEvB,CCxBO,MAAM,UAAqBG,MACvBJ,KAAO,eAEhB,WAAAK,CAAYC,EAAkBC,GAC5BC,MAAMF,EAASC,EACjB,CAEA,IAAKE,OAAOC,eACV,MAAO,cACT,ECPK,MAAMC,EAAgB,KAE7B,IAAYC,GAAZ,SAAYA,GAEV,oCAEA,yBAEA,2BAEA,yBAEA,0BACD,CAXD,CAAYA,IAAAA,EAAS,KCqBd,MAAMC,EACX,MAAAC,CAAOC,GACL,MAAMlB,EAAS,IAAI,KAAOkB,GACpBC,EAAOnB,EAAOM,WACpB,OAAQa,GACN,KDJwB,GCKtB,OAwBR,SAAwBnB,GACtB,MAAMoB,EAAWpB,EAAOqB,YAClBC,EAAyB,GAC/B,IAAK,IAAIC,EAAQvB,EAAOM,WAAYiB,EAAQ,EAAGA,IAAS,CACtD,MAAMtB,EAAKD,EAAOqB,YACZG,EAAOzB,EAASC,GACtBsB,EAAQG,KAAK,CAAExB,KAAIuB,QACrB,CACA,MAAO,CAAEL,KDrCmB,GCqCGC,WAAUE,UAC3C,CAjCeI,CAAe1B,GACxB,KDGyB,GCFvB,OAiCR,SAAyBA,GACvB,MAAM2B,EAAS3B,EAAOqB,YAChBC,EAAyB,GAC/B,IAAK,IAAIC,EAAQvB,EAAOM,WAAYiB,EAAQ,EAAGA,IAAS,CACtD,MAAMtB,EAAKD,EAAOqB,YACZG,EAAOzB,EAASC,GACtBsB,EAAQG,KAAK,CAAExB,KAAIuB,QACrB,CACA,MAAO,CAAEL,KDvCoB,GCuCGQ,SAAQL,UAC1C,CA1CeM,CAAgB5B,GACzB,KDUwB,GCTtB,OA0CR,SAAwBA,GACtB,MAAM6B,EAAO7B,EAAOE,YACpB,MAAO,CAAEiB,KDnCmB,GCmCGU,OACjC,CA7CeC,CAAe9B,GACxB,KDgBuB,GCfrB,OA6CR,SAAuBA,GACrB,MAAM+B,EAAY/B,EAAOM,WACnB0B,EAAYhC,EAAOM,WACzB,MAAO,CAAEa,KDjCkB,GCiCGY,YAAWC,YAC3C,CAjDeC,CAAcjC,GACvB,KDuBuB,GCtBrB,OAiDR,SAAuBA,GACrB,MAAMkC,EAAUlC,EAAOqB,YACjBc,EAAc,IAAIC,IACxB,IAAK,IAAIb,EAAQvB,EAAOM,WAAYiB,EAAQ,EAAGA,IAAS,CACtD,MAAMtB,EAAKD,EAAOqB,YACZgB,EAAQrC,EAAOM,WACfgC,EAAWtC,EAAOM,WAClBiC,EAASvC,EAAOwC,YAChBC,EAAQzC,EAAOwC,YACfE,EAAS1C,EAAOwC,YAChBG,EAAYC,QAAgB,EAARP,GACpBQ,EAAWD,QAAgB,EAARP,GACzBF,EAAYW,IAAI7C,EAAI,CAClB0C,YACAE,WACAP,WACAC,SACAE,QACAC,UAEJ,CACA,MAAO,CAAEvB,KDhDkB,GCgDGe,UAASC,cACzC,CAvEeY,CAAc/C,GACvB,QACE,MAAM,IAAI,EAAa,+BAAiCmB,GAE9D,CAEA,MAAA6B,CAAOvC,GACL,OAAQA,EAAQU,MACd,KDuB4B,GCtB1B,OAAO,QAgEf,SAA6BV,GAC3B,MAAMwC,EAAS,IAAI,KAGnB,OAFAA,EAAOC,SD5CyB,IC6ChCD,EAAOE,UAAU1C,EAAQ2C,WAClBH,EAAOI,QAChB,CArEwBC,CAAoB7C,IACtC,KD6B4B,GC5B1B,OAAO,QAqEf,SAA6BA,GAC3B,MAAMwC,EAAS,IAAI,KAInB,OAHAA,EAAOC,SD3CyB,IC4ChCD,EAAOE,UAAU1C,EAAQyB,SACzBe,EAAOE,UAAU1C,EAAQ8C,WAClBN,EAAOI,QAChB,CA3EwBG,CAAoB/C,IAE1C,ECpDK,SAASgD,EAAanB,GAC3B,OAAQA,GACN,KAAK,EACH,MAAO,IACT,KAAK,EACH,MAAO,MACT,KAAK,EACH,MAAO,MACT,KAAK,EACH,MAAO,MACT,QACE,MAAO,GAAGA,MAEhB,C,wBCaO,MAAMoB,EAASC,OAAOC,OAAO,CAClC3D,GAAI,EACJuB,KAAMmC,OAAOC,OAAO,CAClB3D,GAAI,KACJE,KAAM,SACNC,SAAU,OAEZuC,WAAW,EACXE,UAAU,EACVP,SAAU,EACVC,OAAQ,EACRE,MAAO,EACPC,OAAQ,EACRmB,SAAU,IAGL,SAASC,EAAcjC,GAC5B,OAAO,IAAI,KAAUA,EAAM,CACzBkC,aAAa,EACbC,eAAe,EACfC,iBAAiB,GAErB,CAuCO,SAASC,EACdC,EACAC,EACA3D,GAEA,OAAQA,EAAQU,MACd,KHnE0B,GGoExB,OAYN,SACEiD,GACA,SAAEhD,EAAQ,QAAEE,IAEZ,MAAM+C,EAAMC,EAAaF,EAAW9C,QAAQ+C,IAAK/C,GAC3CiD,EAC8B,IAAlCH,EAAW9C,QAAQ+C,IAAIG,OACnBC,EAAOJ,EAAKjD,GACZqD,EAAOJ,EAAKD,EAAW9C,QAAQiD,GAAGtE,IACxC,MAAO,IACFmE,EACH9C,QAAS,CAAE+C,MAAKE,MAEpB,CAzBaG,CAAwBN,EAAY3D,GAC7C,KH5D2B,GG6DzB,OAyBN,SACE2D,GACA,OAAEzC,EAAM,QAAEL,IAEV,MAAM+C,EAAMC,EAAaF,EAAW9C,QAAQ+C,IAAK/C,GAC3CiD,EACJH,EAAW9C,QAAQiD,GAAGtE,KAAO0B,EACzB+B,EACAe,EAAOJ,EAAKD,EAAW9C,QAAQiD,GAAGtE,IACxC,MAAO,IACFmE,EACH9C,QAAS,CAAE+C,MAAKE,MAEpB,CAtCaI,CAAyBP,EAAY3D,GAC9C,KHrD0B,GGsDxB,OAsCN,SACE2D,GACA,KAAEvC,IAEF,MAAM+C,EAAYd,EAAcjC,IAC1B,MAAEgD,GAAUD,EAClB,MAAO,IAAKR,EAAYQ,YAAWC,QACrC,CA7CaC,CAAwBV,EAAY3D,GAC7C,KH/CyB,GGgDvB,OA6CN,SACE0D,EACAC,GACA,UAAErC,EAAS,UAAEC,IAEb,OAAQD,GACN,KAAKhB,EAAUgE,QACb,MAAO,IACFX,EACHrC,YACAT,QAAS0D,EAAaZ,EAAW9C,SACjC2D,OAAQd,EAAKe,cAAc,CAAD,iBAM9B,KAAKnE,EAAUoE,SACb,MAAO,IACFf,EACHrC,YACAT,QAAS0D,EAAaZ,EAAW9C,SACjC2D,OAAQd,EAAKe,cAAc,CAAD,eAKxB,CAAElD,eAIR,KAAKjB,EAAUqE,QACb,MAAO,IACFhB,EACHrC,YACAsD,MAAO,IAAI,KACXJ,OAAQd,EAAKe,cAAc,CAAD,iBAM9B,KAAKnE,EAAUuE,SACb,OAAIlB,EAAW9C,QAAQiD,GAAG1B,SACjB,IACFuB,EACHrC,aAGK,IACFqC,EACHrC,YACAkD,OAAQd,EAAKe,cAAc,CAAD,iBAOhC,QACE,MAAM,IAAI3E,MAEhB,CA3GagF,CAAuBpB,EAAMC,EAAY3D,GAClD,KHxCyB,GGyCvB,OA2GN,SACE0D,EACAC,EACA3D,GAEA,MAAMa,EA6CR,SACE8C,GACA,YAAEjC,IAEF,MAAMb,EAAU,IAAIc,IAClBgC,EAAW9C,QAAQ+C,IAAImB,KAAKC,GAAW,CAACA,EAAOxF,GAAIwF,MAErD,IAAK,MACHxF,GACA,UAAE0C,EAAS,SAAEE,EAAQ,SAAEP,EAAQ,OAAEC,EAAM,MAAEE,EAAK,OAAEC,MAC7CP,EAAYuD,UAAW,CAC1B,MAAMD,EAASnE,EAAQqE,IAAI1F,GAC3B,GAAc,MAAVwF,IAEAA,EAAO9C,YAAcA,GACrB8C,EAAO5C,WAAaA,GACpB4C,EAAOnD,WAAaA,GACpBmD,EAAOlD,SAAWA,GAClBkD,EAAOhD,QAAUA,GACjBgD,EAAO/C,SAAWA,GAClB,CACA,MAAMmB,EAAWtB,EAAS6B,EAAWQ,UAAUJ,OAC/ClD,EAAQwB,IAAI2C,EAAOxF,GAAI,CACrBA,GAAIwF,EAAOxF,GACXuB,KAAMiE,EAAOjE,KACbmB,YACAE,WACAP,WACAC,SACAE,QACAC,SACAmB,YAEJ,CAEJ,CACA,MAAMQ,EAAM,IAAI/C,EAAQsE,UAClBrB,EAAKE,EAAOJ,EAAKD,EAAW9C,QAAQiD,GAAGtE,IAC7C,MAAO,CAAEoE,MAAKE,KAChB,CApFkBsB,CAAmBzB,EAAY3D,GAC/C,OAAIa,EAAQiD,GAAG5B,UACN,IACFyB,EACH9C,UACA2D,OAAQd,EAAKe,cAAc,CAAD,iBAKnB5D,EAAQiD,GAAG1B,SACQ,IAAxBvB,EAAQiD,GAAGjC,SACN,IACF8B,EACH9C,UACA2D,OAAQd,EAAKe,cAAc,CAAD,iBAMrB,IACFd,EACH9C,UACA2D,OAAQd,EAAKe,cAAc,CAAD,eAKxB,CAAE5C,SAAUmB,EAAanC,EAAQiD,GAAGjC,aAKnC,IACF8B,EACH9C,UACA2D,OAAQd,EAAKe,cAAc,CAAD,gBAMhC,CA3JaY,CAAuB3B,EAAMC,EAAY3D,GAEtD,CAoMA,SAASuE,EAAae,GACpB,MAAM1B,EAAM0B,EAAK1B,IAAImB,KAAKC,IAAW,CACnCxF,GAAIwF,EAAOxF,GACXuB,KAAMiE,EAAOjE,KACbmB,WAAW,EACXE,UAAU,EACVP,SAAU,EACVC,OAAQ,EACRE,MAAO,EACPC,OAAQ,EACRmB,SAAU,MAGZ,MAAO,CAAEQ,MAAKE,GADHE,EAAOJ,EAAK0B,EAAKxB,GAAGtE,IAEjC,CAEA,SAASqE,EACPD,EACA2B,GAEA,MAAMC,EAAO,IAAI7D,IACfiC,EAAImB,KAAKC,GAAW,CAACA,EAAOxF,GAAIwF,MAE5BS,EAAO,IAAI9D,IACf4D,EAASR,KAAKC,GAAW,CAACA,EAAOxF,GAAIwF,MAEvC,IAAK,MAAMA,KAAUQ,EAAKL,SACG,MAAvBM,EAAKP,IAAIF,EAAOxF,KAClBgG,EAAKE,OAAOV,EAAOxF,IAGvB,IAAK,MAAMwF,KAAUS,EAAKN,SACG,MAAvBK,EAAKN,IAAIF,EAAOxF,KAClBgG,EAAKnD,IAAI2C,EAAOxF,GAAI,CAClBA,GAAIwF,EAAOxF,GACXuB,KAAMiE,EAAOjE,KACbmB,WAAW,EACXE,UAAU,EACVP,SAAU,EACVC,OAAQ,EACRE,MAAO,EACPC,OAAQ,EACRmB,SAAU,IAIhB,MAAO,IAAIoC,EAAKL,SAClB,CAEA,SAASnB,EAAOJ,EAAwBpE,GACtC,OAAOoE,EAAI+B,MAAMX,GAAWA,EAAOxF,KAAOA,KAAOyD,CACnD,C,8FC5VO,MAAM2C,GAAY,IAAAC,OAAK,UAAmB,UAC/CC,EAAS,MACTC,EAAQ,IAAG,OACXC,EAAS,MAMT,OACE,iBACEF,UAAWA,EACXC,MAAOA,EACPC,OAAQA,EACRC,QAAQ,cAAa,WAErB,iBACEC,KAAK,OACLC,EAAE,osDAEJ,iBACED,KAAK,OACLC,EAAE,i7BAEJ,iBACED,KAAK,OACLE,OAAO,OACPC,YAAY,IACZC,cAAc,QACdH,EAAE,wRAIV,I,gEChCA,MAAMI,EAA4B,CAChC,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAyVIC,EAAmD,EA/U1C,IAAAX,OAAK,UAAgB,UAClCC,EAAS,MACTC,EAAK,OACLC,EAAM,MACNS,IAEA,OACE,iBACEX,UAAWA,EACXC,MAAOA,EACPC,OAAQA,EACRC,QAAQ,YAAW,WAEnB,iBACEC,KAAK,UACLC,EAAE,mHAEJ,iBACED,KAAK,UACLC,EAAE,kMAEJ,iBACED,KAAK,UACLC,EAAE,2FAEJ,iBACED,KAAK,UACLC,EAAE,oMAEJ,iBACED,KAAMO,EACNN,EAAE,q0BAEJ,iBACED,KAAK,UACLC,EAAE,k2BAEJ,iBACED,KAAK,UACLC,EAAE,oYAEJ,iBACED,KAAK,UACLC,EAAE,0fAEJ,iBACED,KAAK,UACLC,EAAE,ubAEJ,iBACED,KAAK,UACLC,EAAE,saAIV,KAEe,IAAAN,OAAK,UAAgB,UAClCC,EAAS,MACTC,EAAK,OACLC,EAAM,MACNS,IAEA,OACE,iBACEX,UAAWA,EACXC,MAAOA,EACPC,OAAQA,EACRC,QAAQ,YAAW,WAEnB,iBACEC,KAAMO,EACNN,EAAE,+8BAEJ,iBACED,KAAK,UACLC,EAAE,8FAEJ,iBACED,KAAK,UACLC,EAAE,uMAEJ,iBACED,KAAK,UACLC,EAAE,8FAEJ,iBACED,KAAK,UACLC,EAAE,sMAEJ,iBACED,KAAK,UACLC,EAAE,umBAEJ,iBACED,KAAK,UACLC,EAAE,4cAEJ,iBACED,KAAK,UACLC,EAAE,48BAIV,KAEe,IAAAN,OAAK,UAAgB,UAClCC,EAAS,MACTC,EAAK,OACLC,EAAM,MACNS,IAEA,OACE,iBACEX,UAAWA,EACXC,MAAOA,EACPC,OAAQA,EACRC,QAAQ,YAAW,WAEnB,iBACEC,KAAK,UACLC,EAAE,0IAEJ,iBACED,KAAK,UACLC,EAAE,qMAEJ,iBACED,KAAK,UACLC,EAAE,wHAEJ,iBACED,KAAK,UACLC,EAAE,kMAEJ,iBACED,KAAK,UACLC,EAAE,6JAEJ,iBACED,KAAMO,EACNN,EAAE,isBAEJ,iBACED,KAAK,UACLC,EAAE,w2CAEJ,iBACED,KAAK,UACLC,EAAE,4aAIV,KAEe,IAAAN,OAAK,UAAgB,UAClCC,EAAS,MACTC,EAAK,OACLC,EAAM,MACNS,IAEA,OACE,iBACEX,UAAWA,EACXC,MAAOA,EACPC,OAAQA,EACRC,QAAQ,YAAW,WAEnB,iBACEC,KAAMO,EACNN,EAAE,oWAEJ,iBACED,KAAK,UACLC,EAAE,2HAEJ,iBACED,KAAK,UACLC,EAAE,6FAEJ,iBACED,KAAK,UACLC,EAAE,imBAEJ,iBACED,KAAK,UACLC,EAAE,qFAEJ,iBACED,KAAK,UACLC,EAAE,2rBAEJ,iBACED,KAAK,UACLC,EAAE,+hBAEJ,iBACED,KAAK,UACLC,EAAE,wGAEJ,iBACED,KAAK,UACLC,EAAE,6JAEJ,iBACED,KAAK,UACLC,EAAE,4IAEJ,iBACED,KAAK,UACLC,EAAE,sEAEJ,iBACED,KAAK,UACLC,EAAE,0LAEJ,iBACED,KAAK,UACLC,EAAE,4IAEJ,iBACED,KAAK,UACLC,EAAE,kGAEJ,iBACED,KAAK,UACLC,EAAE,8DAEJ,iBACED,KAAK,UACLC,EAAE,4dAIV,KAEe,IAAAN,OAAK,UAAgB,UAClCC,EAAS,MACTC,EAAK,OACLC,EAAM,MACNS,IAEA,OACE,iBACEX,UAAWA,EACXC,MAAOA,EACPC,OAAQA,EACRC,QAAQ,YAAW,WAEnB,iBACEC,KAAK,UACLC,EAAE,mKAEJ,iBACED,KAAK,UACLC,EAAE,0MAEJ,iBACED,KAAK,UACLC,EAAE,mKAEJ,iBACED,KAAK,UACLC,EAAE,sOAEJ,iBACED,KAAK,UACLC,EAAE,6GAEJ,iBACED,KAAMO,EACNN,EAAE,sXAEJ,iBACED,KAAK,UACLC,EAAE,oQAEJ,iBACED,KAAK,UACLC,EAAE,2gBACFO,QAAQ,SAEV,iBACER,KAAK,UACLC,EAAE,wxBAIV,KAEe,IAAAN,OAAK,UAAgB,UAClCC,EAAS,MACTC,EAAK,OACLC,EAAM,MACNS,IAEA,OACE,iBACEX,UAAWA,EACXC,MAAOA,EACPC,OAAQA,EACRC,QAAQ,YAAW,WAEnB,iBACEC,KAAMO,EACNN,EAAE,yRAEJ,iBACED,KAAK,UACLC,EAAE,oMAEJ,iBACED,KAAK,UACLC,EAAE,24BAEJ,iBACED,KAAK,UACLC,EAAE,oaAEJ,iBACED,KAAK,UACLC,EAAE,2VAEJ,iBACED,KAAK,UACLC,EAAE,uYAEJ,iBACED,KAAK,UACLC,EAAE,+VAIV,KAkBaQ,GAAW,IAAAd,OAAK,UAAkB,UAC7CC,EAAS,MACTC,EAAQ,GAAE,OACVC,EAAS,GAAE,KACXY,IAEA,MAAMC,GAAS,OAAID,GACbH,GAAQ,QAAaF,EAAQM,GAC7BC,GAAQ,QAAaN,EAAQK,GACnC,OACE,SAACC,E,CACChB,UAAWA,EACXC,MAAOA,EACPC,OAAQA,EACRS,MAAOA,GAGb,ICxYA,IASIM,EAAK,aAELC,EAAK,aCFF,MAAMC,GAAO,IAAApB,OAAK,UAAc,OACrCb,EAAM,GACNlB,IAKA,MAAM,MAAE9B,EAAK,OAAEC,EAAM,SAAEJ,EAAQ,SAAEuB,GAAa4B,GACxC,cAAEP,IAAkB,EAAAyC,EAAA,MACpB,aAAEC,EAAY,eAAEC,IAAmB,UACnCC,GAAU,IAAAC,QAAuB,MACjCC,GAAS,IAAAD,QAAuB,MAUtC,OATA,IAAAE,YAAU,KACR,MAAMC,EAAOJ,EAAQK,QACfC,EAAMJ,EAAOG,QACnB,GAAY,MAARD,GAAuB,MAAPE,EAAa,CAC/B,MAAMC,EAAYH,EAAKI,YACjBC,EAAWH,EAAIE,YACrBF,EAAII,MAAMC,kBAAuBJ,EAAYE,GAAY1E,EAA5B,IAC/B,IACC,CAACA,KAEF,iBACE0C,WAAW,EAAAmC,EAAA,GACT,EACAjD,EAAO5C,UD9BN,cC+BD4C,EAAO9C,WD7BN,aC8BD8C,IAAWlB,GD/BV,cCgCF,WAED,gBAAKgC,UD/BF,aC+BwB,UACzB,SAAC,KAAQ,CAAC/E,KAAMiE,EAAOjE,UAEzB,gBAAKmH,IAAKb,EAASvB,UDnChB,aCmCsC,UACvC,gBAAKoC,IAAKX,EAAQzB,UD3CjB,aC2CsC,UACrC,SAACa,EAAQ,CAACb,UD3CX,aC2CuCc,KAAM5B,EAAOxF,UAGvD,iBAAKsG,UD7CF,aC6C2B,WAC5B,SAACqC,EAAA,GAAS,CACRC,MAAO3D,EAAc,CAAD,gBAIpB/E,KAAM+E,EAAc,CAAD,gBAInB4D,OACE,SAAC,K,CACCvC,UAAW,EACXuC,MAAOrF,EAAanB,QAI1B,SAACsG,EAAA,GAAS,CACRC,MAAO3D,EAAc,CAAD,gBAIpB/E,KAAM+E,EAAc,CAAD,gBAInB4D,OACE,SAAC,K,CACCvC,UAAW,EACXuC,MAAOjB,EAAehE,EAAU,QAItC,SAAC+E,EAAA,GAAS,CACRC,MAAO3D,EAAc,CAAD,gBAIpB/E,KAAM+E,EAAc,CAAD,gBAInB4D,OACE,SAAC,K,CACCvC,UAAW,EACXuC,MAAOlB,EAAanF,QAI1B,SAACmG,EAAA,GAAS,CACRC,MAAO3D,EAAc,CAAD,gBAIpB/E,KAAM+E,EAAc,CAAD,gBAInB4D,OACE,SAAC,K,CACCvC,UAAW,EACXuC,MAAOlB,EAAalF,YAOlC,IAEaqG,GAAa,IAAAzC,OAAK,WAC7B,OAAO,gBAAKC,WAAW,EAAAmC,EAAA,GAAK,EDnHrB,eCoHT,ICjHO,MAAMM,GAAQ,IAAA1C,OAAK,UAAe,OACvCrB,EACA3D,SAAS,IAAE+C,EAAG,GAAEE,KAKhB,OACE,iBAAKgC,UCXA,aDWuB,WAC1B,gBAAKA,UCbF,aDa0B,SAAGtB,IAC/BgE,EAAY5E,GAAKmB,KAAKvF,IACrB,SAAC8I,EAAU,GAAM9I,KAElBiJ,EAAU7E,EAAKE,GAAIiB,KAAKC,IACvB,SAACiC,EAAI,CAAiBjC,OAAQA,EAAQlB,GAAIA,GAA/BkB,EAAOxF,MAEnBsE,EAAG1B,WACF,gBAAK0D,UCvBJ,aDuB4B,UAC3B,SAACF,EAAS,CAACE,UCvBZ,mBD4BT,IAEa4C,GAAgB,OAAaH,GAE1C,SAASE,EAAU7E,EAAwBE,GACzC,MAAO,IAAIF,GAAK+E,MAAK,CAACC,EAAGC,IAEnBD,IAAM9E,EACD,EAEL+E,IAAM/E,GACA,EAGH+E,EAAErJ,GAAKoJ,EAAEpJ,IAEpB,CAEA,SAASgJ,EAAY3H,GACnB,MAAMiI,EAAO,GACb,KAAOA,EAAK/E,OAASlD,EAAQkD,OAAS,GACpC+E,EAAK9H,KAAK,UAAU8H,EAAK/E,UAE3B,OAAO+E,CACT,CE/BA,MAAMC,EAAc,OACdC,EAAa,OACbC,EAAqB,eAEdC,EAAO,EAClBC,gBAIA,MAAMzF,GAAO,EAAAwD,EAAA,KACPkC,GAAU,IAAAC,UACd,IAAM,IAAIC,EAAkBH,EAAWzF,IACvC,CAACyF,EAAWzF,KAEPC,EAAY4F,IAAiB,IAAAC,UAASJ,EAAQzF,YAC/C8F,GAAW,IAAAnC,QAAkB,OACnC,IAAAE,YAAU,KACR,MAAMkC,EAAgB,KAEpB,OADAH,EAAcH,EAAQzF,YACdyF,EAAQzF,WAAWrC,WACzB,KAAKhB,EAAUoE,SACf,KAAKpE,EAAUqE,QACb8E,EAAS/B,SAASiC,QAGtB,EAIF,OAFAP,EAAQQ,GAAGX,EAAoBS,GAC/BN,EAAQS,UACD,KACLT,EAAQU,IAAIb,EAAoBS,GAChCN,EAAQW,YAAY,CACrB,GACA,CAACX,IACJ,MAAM,SAAEY,IAAa,UACfC,GAAsB,IAAAZ,UAC1B,KAAM,QAAsBW,IAC5B,CAACA,KAEH,SACA,MAAM,OAAExF,EAAM,QAAE3D,EAAO,MAAEuD,GAAUT,EACnC,OACE,iBAAKmC,UChEA,aDgEsB,WACzB,SAAC4C,EAAa,CAAClE,OAAQA,EAAQ3D,QAASA,KACxC,gBAAKiF,UCjEF,aDiE4B,UAC7B,SAAC,KAAQ,CACP2D,SAAUA,EACVO,SAAUC,EACV7F,MAAOA,EACP8F,QAASnB,EACToB,OAAQnB,EACRoB,QAAShB,EAAQiB,kBAIxB,EAGH,MAAMf,UAA0B,KAInBH,UACAzF,KAJX,GAEA,WAAA3D,CACWoJ,EACAzF,GAETxD,QAHS,KAAAiJ,UAAAA,EACA,KAAAzF,KAAAA,EAGT4G,MAAK,EPvCF,SAAwB5G,GAC7B,MAAMS,EAAYd,EAAc,KAC1B,MAAEe,GAAUD,EAClB,MAAO,CACL7C,UAAWhB,EAAUiK,aACrB1J,QAAS,CACP+C,IAAK,GACLE,GAAIb,GAENkB,YACAC,QACAQ,MAAO,IAAI,KACXJ,OAAQd,EAAKe,cAAc,CAAD,gBAK9B,COsBuB+F,CAAeF,KAAK5G,KACzC,CAEA,cAAIC,GACF,OAAO2G,MAAK,CACd,CAEA,aAAAf,CAAc5F,GACZ2G,MAAK,EAAc3G,EACnB2G,KAAKG,KAAKxB,EAAoBtF,EAChC,CAEA+G,cAAiB1K,IACfsK,KAAKf,cAAc9F,EAAiB6G,KAAK5G,KAAM4G,MAAK,EAAatK,GAAS,EAG5EqK,YAAc,EAAGM,YAAW7H,gBAC1B,GAAkB,eAAd6H,EAA4B,CAC9B,MAAMC,EPtCL,SACLjH,EACAb,GAKA,MAAM,UAAExB,EAAS,QAAET,EAAO,UAAEsD,EAAS,MAAES,GAAUjB,EACjD,GAAK9C,EAAQiD,GAAG5B,WAAaZ,IAAchB,EAAUqE,QAMnD,OAAO,KANqD,CAC5D,MAAMlD,EAAUoJ,KAAKC,MAAMlG,EAAMnD,SACjC0C,EAAU4G,WAAWtJ,EAASqB,EAAW,GACzC,MAAM,MAAEsB,GAAUD,EAClB,MAAO,CAAER,WAAY,IAAKA,EAAYS,SAAS3C,UACjD,CAGF,COsBqBuJ,CAAgBV,MAAK,EAAaxH,GACjD,GAAc,MAAV8H,EAAgB,CAClB,MAAM,WAAEjH,EAAU,QAAElC,GAAYmJ,EAChCN,KAAKf,cAAc5F,GACnB2G,KAAKnB,UAAU8B,KAAK,CAClBvK,KVlCwB,GUmCxBe,UACAqB,aAEJ,CACF,GAGF,OAAA+G,GACES,KAAKnB,UAAU+B,YAAYZ,KAAKI,eAChCJ,KAAKnB,UAAU8B,KAAK,CAClBvK,KVrD4B,GUsD5BiC,UAAW,YAEf,CAEA,UAAAoH,GACEO,KAAKnB,UAAUgC,eAAeb,KAAKI,cACrC,EE/HK,MAAMU,EAGF,GAAa,IAAIC,IAIjB,GACA,GAET,WAAAtL,CACEuL,EACAC,GAEAjB,MAAK,EAAagB,EAClBhB,MAAK,EAASiB,EACdjB,MAAK,EAAWkB,WAAa,aAC/B,CAEA,WAAAN,CAAYO,GACV,MAAMC,EAAYC,IAChB,IAAI3L,EACJ,IACEA,EAAUsK,MAAK,EAAO9J,OAAO,IAAIoL,WAAWD,EAAMlL,MACpD,CAAE,MAAOoL,GAEP,MADAvB,KAAKwB,MAAM,IAAMD,EAAI7L,SACf6L,CACR,CACAJ,EAASzL,EAAQ,EAEnB0L,EAASD,SAAWA,EACpBnB,MAAK,EAAWyB,iBAAiB,UAAWL,GAC5CpB,MAAK,EAAW0B,IAAIN,EACtB,CAEA,cAAAP,CAAeM,GACb,IAAK,MAAMC,KAAYpB,MAAK,EACtBoB,EAASD,WAAaA,IACxBnB,MAAK,EAAW2B,oBAAoB,UAAWP,GAC/CpB,MAAK,EAAW5E,OAAOgG,GAG7B,CAEA,IAAAT,CAAKjL,GACH,IAAIS,EACJ,IACEA,EAAO6J,MAAK,EAAO/H,OAAOvC,EAC5B,CAAE,MAAO6L,GAEP,MADAvB,KAAKwB,MAAM,IAAMD,EAAI7L,SACf6L,CACR,CACAvB,MAAK,EAAWW,KAAKxK,EACvB,CAEA,KAAAqL,CAAMI,EAAeC,GACnB7B,MAAK,EAAWwB,MAAMI,EAAMC,EAC9B,ECxDK,SAASC,IACd,MAAOC,EAAOC,IAAY,IAAA9C,UAAS,CACjC8B,UAAW,KACXiB,WAAYC,UAAUC,WACtBC,QAAQ,IA0DV,OAnDA,IAAAlF,YAAU,KACR,MAAMmF,EAAQ,IAAI,KAClB,IAAIrB,EAA8B,KAElC,MAAMzB,EAAU,KACd,MAAM+C,EAAiBtB,EAAYc,EAAaQ,gBAEhDA,EAAcb,iBAAiB,QAAQ,KACrCc,QAAQC,IAAI,uBACZR,EAAS,CACPhB,UAAYA,EAAYsB,EACxBL,WAAYC,UAAUO,KACtBL,QAAQ,GACR,IAGJE,EAAcb,iBAAiB,SAAUiB,IAOvC,OANAH,QAAQC,IAAI,0BAA0BE,EAAGd,iBAAiBc,EAAGb,WAC7DG,EAAS,CACPhB,UAAYA,EAAY,KACxBiB,WAAYC,UAAUS,OACtBP,OAAQM,EAAGd,OAAS7L,IAEd2M,EAAGd,MACT,KAAK,KACL,KAAK,KACL,KAAK,KACHS,EAAMO,QAAQ,KAAM,KAClBrD,GAAS,IAGf,IAGF+C,EAAcb,iBAAiB,SAAS,KACtCc,QAAQM,MAAM,mBACdP,EAAcd,OAAO,GACrB,EAKJ,OAFAjC,IAEO,KACY,MAAbyB,IACFA,EAAUQ,QACVR,EAAY,MAEdqB,EAAMS,WAAW,CAClB,GACA,IAEIf,CACT,CC3DO,SAASgB,IACd,MAAM,UAAElE,EAAS,WAAEoD,EAAU,OAAEG,GAoBjC,WACE,MAAM,UAAEpB,EAAS,WAAEiB,EAAU,OAAEG,GAAWN,IACpCjD,GAAY,IAAAE,UAAQ,IACJ,MAAbiC,EACH,IAAIF,EAAmBE,EAAW,IAAI/K,GACtC,MACH,CAAC+K,IACJ,MAAO,CAAEnC,YAAWoD,aAAYG,SAClC,CA5B4CY,GAC1C,OAAQf,GACN,KAAKC,UAAUC,WACb,OAAO,SAACc,GAAU,IACpB,KAAKf,UAAUO,KACb,OACE,iCACE,SAACS,GAAM,KACP,SAACtE,EAAI,CAACC,UAAWA,OAGvB,QACE,OAAIuD,GACK,SAACe,GAAM,KAEP,SAACC,GAAO,IAGvB,CAYA,SAASF,KACP,OACE,SAACG,EAAA,EAAI,CAACC,MAAM,SAAQ,UAClB,SAAC,IAAgB,kBAMvB,CAEA,SAASL,KACP,OACE,SAACM,EAAA,EAAO,WACN,SAAC,IAAgB,kBASvB,CAEA,SAASH,KACP,OACE,SAACG,EAAA,EAAO,WACN,SAAC,IAAgB,kBAUvB,CAEA,SAASJ,KACP,OACE,SAACI,EAAA,EAAO,WACN,SAAC,IAAgB,kBASvB,CCzFO,SAASC,KACd,OAAO,SAACT,EAAS,GACnB,CFiEAjB,EAAaQ,cAAgB,IACpB,IAAIJ,UAGb,WACE,MAAM,SAAEuB,EAAQ,KAAEC,GAASC,OAAOC,SAClC,IAAIC,EAAS,GACb,OAAQJ,GACN,IAAK,SACHI,EAAS,OACT,MACF,IAAK,QACHA,EAAS,MACT,MACF,QACE,MAAM,IAAIrO,MAEd,MAAO,GAAGqO,MAAWH,iBACvB,CAjBuBI,I,eGnER,SAASC,KACtB,OACE,SAAC,MAAY,WACX,SAACP,GAAe,KAGtB,C","sources":["webpack://keybr.com/./packages/keybr-multiplayer-shared/lib/codec.user.ts","webpack://keybr.com/./packages/keybr-multiplayer-shared/lib/errors.ts","webpack://keybr.com/./packages/keybr-multiplayer-shared/lib/messages.ts","webpack://keybr.com/./packages/keybr-multiplayer-shared/lib/codec.client.ts","webpack://keybr.com/./packages/keybr-multiplayer-shared/lib/util.ts","webpack://keybr.com/./packages/keybr-multiplayer-shared/lib/worldstate.ts","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/image/flag.tsx","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/image/car.tsx","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/Lane.module.less?5017","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/Lane.tsx","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/Track.tsx","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/Track.module.less?e7d3","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/Game.tsx","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/Game.module.less?f462","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/transport.websocket.ts","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/websocket-hooks.ts","webpack://keybr.com/./packages/keybr-multiplayer-ui/lib/Connector.tsx","webpack://keybr.com/./packages/page-multiplayer/lib/MultiplayerPage.tsx","webpack://keybr.com/./packages/keybr-pages-browser/lib/pages/multiplayer.tsx"],"sourcesContent":["import { type Reader, type Writer } from \"@keybr/binary\";\nimport {\n  type AnonymousUser,\n  type AnyUser,\n  type NamedUser,\n} from \"@keybr/pages-shared\";\n\nexport function writeUser(user: AnyUser, writer: Writer): void {\n  writer.putString(user.id || \"\");\n  writer.putString(user.name || \"\");\n  writer.putString(user.imageUrl || \"\");\n  writer.putUint8(user.id != null && user.premium ? 1 : 0);\n}\n\nexport function readUser(reader: Reader): AnyUser {\n  const id = reader.getString() || null;\n  const name = reader.getString() || null;\n  const imageUrl = reader.getString() || null;\n  const premium = reader.getUint8() > 0;\n  if (id != null) {\n    return { id, name, imageUrl, premium } as NamedUser;\n  } else {\n    return { id, name, imageUrl } as AnonymousUser;\n  }\n}\n","export class MessageError extends Error {\n  override name = \"MessageError\";\n\n  constructor(message?: string, options?: ErrorOptions) {\n    super(message, options);\n  }\n\n  get [Symbol.toStringTag]() {\n    return \"MessageError\";\n  }\n}\n","import { type BasicPlayer, type PlayerState } from \"./types.ts\";\n\nexport const PLAYER_KICKED = 4001;\n\nexport enum GameState {\n  /** Game is initializing. */\n  INITIALIZING = -1,\n  /** Waiting for more players. */\n  WAITING = 0,\n  /** Game is about to start, a count down is in progress. */\n  STARTING = 1,\n  /** Game is active and the game world is updated by the users. */\n  RUNNING = 2,\n  /** Game is finished. */\n  FINISHED = 3,\n}\n\nexport type ServerMessage =\n  | PlayerJoinMessage\n  | PlayerLeaveMessage\n  | GameConfigMessage\n  | GameReadyMessage\n  | GameWorldMessage;\n\nexport type ClientMessage = PlayerAnnounceMessage | PlayerProgressMessage;\n\nexport const PLAYER_JOIN_ID = 0x11 as const;\n\n/** The set of players is changed. */\nexport type PlayerJoinMessage = {\n  readonly type: typeof PLAYER_JOIN_ID;\n  readonly joinedId: number;\n  readonly players: readonly BasicPlayer[];\n};\n\nexport const PLAYER_LEAVE_ID = 0x12 as const;\n\n/** The set of players is changed. */\nexport type PlayerLeaveMessage = {\n  readonly type: typeof PLAYER_LEAVE_ID;\n  readonly leftId: number;\n  readonly players: readonly BasicPlayer[];\n};\n\nexport const GAME_CONFIG_ID = 0x21 as const;\n\n/** New game details. */\nexport type GameConfigMessage = {\n  readonly type: typeof GAME_CONFIG_ID;\n  readonly text: string;\n};\n\nexport const GAME_READY_ID = 0x22 as const;\n\n/** New game is about to start. */\nexport type GameReadyMessage = {\n  readonly type: typeof GAME_READY_ID;\n  readonly gameState: GameState;\n  readonly countDown: number;\n};\n\nexport const GAME_WORLD_ID = 0x23 as const;\n\n/** Game world has changed. */\nexport type GameWorldMessage = {\n  readonly type: typeof GAME_WORLD_ID;\n  readonly elapsed: number;\n  readonly playerState: ReadonlyMap<number, PlayerState>;\n};\n\nexport const PLAYER_ANNOUNCE_ID = 0x11 as const;\n\n/** Player is ready to join. */\nexport type PlayerAnnounceMessage = {\n  readonly type: typeof PLAYER_ANNOUNCE_ID;\n  readonly signature: number;\n};\n\nexport const PLAYER_PROGRESS_ID = 0x21 as const;\n\n/** Player updates game world. */\nexport type PlayerProgressMessage = {\n  readonly type: typeof PLAYER_PROGRESS_ID;\n  readonly elapsed: number;\n  readonly codePoint: number;\n};\n","import { Reader, scramble, Writer } from \"@keybr/binary\";\nimport { type Codec } from \"./codec.ts\";\nimport { readUser } from \"./codec.user.ts\";\nimport { MessageError } from \"./errors.ts\";\nimport {\n  type ClientMessage,\n  GAME_CONFIG_ID,\n  GAME_READY_ID,\n  GAME_WORLD_ID,\n  type GameConfigMessage,\n  type GameReadyMessage,\n  type GameState,\n  type GameWorldMessage,\n  PLAYER_ANNOUNCE_ID,\n  PLAYER_JOIN_ID,\n  PLAYER_LEAVE_ID,\n  PLAYER_PROGRESS_ID,\n  type PlayerAnnounceMessage,\n  type PlayerJoinMessage,\n  type PlayerLeaveMessage,\n  type PlayerProgressMessage,\n  type ServerMessage,\n} from \"./messages.ts\";\nimport { type BasicPlayer, type PlayerState } from \"./types.ts\";\n\nexport class ClientCodec implements Codec<ServerMessage, ClientMessage> {\n  decode(data: Uint8Array): ServerMessage {\n    const reader = new Reader(data);\n    const type = reader.getUint8();\n    switch (type) {\n      case PLAYER_JOIN_ID:\n        return readPlayerJoin(reader);\n      case PLAYER_LEAVE_ID:\n        return readPlayerLeave(reader);\n      case GAME_CONFIG_ID:\n        return readGameConfig(reader);\n      case GAME_READY_ID:\n        return readGameReady(reader);\n      case GAME_WORLD_ID:\n        return readGameWorld(reader);\n      default:\n        throw new MessageError(\"Unrecognized server message \" + type);\n    }\n  }\n\n  encode(message: ClientMessage): Uint8Array {\n    switch (message.type) {\n      case PLAYER_ANNOUNCE_ID:\n        return scramble(writePlayerAnnounce(message));\n      case PLAYER_PROGRESS_ID:\n        return scramble(writePlayerProgress(message));\n    }\n  }\n}\n\nfunction readPlayerJoin(reader: Reader): PlayerJoinMessage {\n  const joinedId = reader.getUint32();\n  const players: BasicPlayer[] = [];\n  for (let count = reader.getUint8(); count > 0; count--) {\n    const id = reader.getUint32();\n    const user = readUser(reader);\n    players.push({ id, user });\n  }\n  return { type: PLAYER_JOIN_ID, joinedId, players };\n}\n\nfunction readPlayerLeave(reader: Reader): PlayerLeaveMessage {\n  const leftId = reader.getUint32();\n  const players: BasicPlayer[] = [];\n  for (let count = reader.getUint8(); count > 0; count--) {\n    const id = reader.getUint32();\n    const user = readUser(reader);\n    players.push({ id, user });\n  }\n  return { type: PLAYER_LEAVE_ID, leftId, players };\n}\n\nfunction readGameConfig(reader: Reader): GameConfigMessage {\n  const text = reader.getString();\n  return { type: GAME_CONFIG_ID, text };\n}\n\nfunction readGameReady(reader: Reader): GameReadyMessage {\n  const gameState = reader.getUint8() as GameState;\n  const countDown = reader.getUint8();\n  return { type: GAME_READY_ID, gameState, countDown };\n}\n\nfunction readGameWorld(reader: Reader): GameWorldMessage {\n  const elapsed = reader.getUint32();\n  const playerState = new Map<number, PlayerState>();\n  for (let count = reader.getUint8(); count > 0; count--) {\n    const id = reader.getUint32();\n    const flags = reader.getUint8();\n    const position = reader.getUint8();\n    const offset = reader.getUint16();\n    const speed = reader.getUint16();\n    const errors = reader.getUint16();\n    const spectator = Boolean(flags & 1);\n    const finished = Boolean(flags & 2);\n    playerState.set(id, {\n      spectator,\n      finished,\n      position,\n      offset,\n      speed,\n      errors,\n    });\n  }\n  return { type: GAME_WORLD_ID, elapsed, playerState };\n}\n\nfunction writePlayerAnnounce(message: PlayerAnnounceMessage): Uint8Array {\n  const writer = new Writer();\n  writer.putUint8(PLAYER_ANNOUNCE_ID);\n  writer.putUint32(message.signature);\n  return writer.buffer();\n}\n\nfunction writePlayerProgress(message: PlayerProgressMessage): Uint8Array {\n  const writer = new Writer();\n  writer.putUint8(PLAYER_PROGRESS_ID);\n  writer.putUint32(message.elapsed);\n  writer.putUint32(message.codePoint);\n  return writer.buffer();\n}\n","export function positionName(position: number): string {\n  switch (position) {\n    case 0:\n      return \"-\";\n    case 1:\n      return \"1st\";\n    case 2:\n      return \"2nd\";\n    case 3:\n      return \"3rd\";\n    default:\n      return `${position}th`;\n  }\n}\n","import { Timer } from \"@keybr/lang\";\nimport { type AnyUser } from \"@keybr/pages-shared\";\nimport { TextInput } from \"@keybr/textinput\";\nimport { type IntlShape } from \"react-intl\";\nimport {\n  GAME_CONFIG_ID,\n  GAME_READY_ID,\n  GAME_WORLD_ID,\n  type GameConfigMessage,\n  type GameReadyMessage,\n  GameState,\n  type GameWorldMessage,\n  PLAYER_JOIN_ID,\n  PLAYER_LEAVE_ID,\n  type PlayerJoinMessage,\n  type PlayerLeaveMessage,\n  type ServerMessage,\n} from \"./messages.ts\";\nimport {\n  type BasicPlayer,\n  type Player,\n  type PlayerList,\n  type WorldState,\n} from \"./types.ts\";\nimport { positionName } from \"./util.ts\";\n\nexport const NOBODY = Object.freeze({\n  id: 0,\n  user: Object.freeze({\n    id: null,\n    name: \"nobody\",\n    imageUrl: null,\n  } satisfies AnyUser),\n  spectator: false,\n  finished: false,\n  position: 0,\n  offset: 0,\n  speed: 0,\n  errors: 0,\n  progress: 0,\n} satisfies Player);\n\nexport function makeTextInput(text: string): TextInput {\n  return new TextInput(text, {\n    stopOnError: true,\n    forgiveErrors: true,\n    spaceSkipsWords: false,\n  });\n}\n\nexport function makeWorldState(intl: IntlShape): WorldState {\n  const textInput = makeTextInput(\"\");\n  const { lines } = textInput;\n  return {\n    gameState: GameState.INITIALIZING,\n    players: {\n      all: [],\n      me: NOBODY,\n    },\n    textInput,\n    lines,\n    timer: new Timer(),\n    ticker: intl.formatMessage({\n      id: \"multiplayer.ticker.initializing\",\n      defaultMessage: \"Initializing...\",\n    }),\n  };\n}\n\nexport function handleTextInput(\n  worldState: WorldState,\n  codePoint: number,\n): {\n  readonly worldState: WorldState;\n  readonly elapsed: number;\n} | null {\n  const { gameState, players, textInput, timer } = worldState;\n  if (!players.me.spectator && gameState === GameState.RUNNING) {\n    const elapsed = Math.trunc(timer.elapsed);\n    textInput.appendChar(elapsed, codePoint, 0);\n    const { lines } = textInput;\n    return { worldState: { ...worldState, lines }, elapsed };\n  } else {\n    return null;\n  }\n}\n\nexport function updateWorldState(\n  intl: IntlShape,\n  worldState: WorldState,\n  message: ServerMessage,\n): WorldState {\n  switch (message.type) {\n    case PLAYER_JOIN_ID:\n      return handlePlayerJoinMessage(worldState, message);\n    case PLAYER_LEAVE_ID:\n      return handlePlayerLeaveMessage(worldState, message);\n    case GAME_CONFIG_ID:\n      return handleGameConfigMessage(worldState, message);\n    case GAME_READY_ID:\n      return handleGameReadyMessage(intl, worldState, message);\n    case GAME_WORLD_ID:\n      return handleGameWorldMessage(intl, worldState, message);\n  }\n}\n\nfunction handlePlayerJoinMessage(\n  worldState: WorldState,\n  { joinedId, players }: PlayerJoinMessage,\n): WorldState {\n  const all = mergePlayers(worldState.players.all, players);\n  const me =\n    worldState.players.all.length === 0 //\n      ? findMe(all, joinedId)\n      : findMe(all, worldState.players.me.id);\n  return {\n    ...worldState,\n    players: { all, me },\n  };\n}\n\nfunction handlePlayerLeaveMessage(\n  worldState: WorldState,\n  { leftId, players }: PlayerLeaveMessage,\n): WorldState {\n  const all = mergePlayers(worldState.players.all, players);\n  const me =\n    worldState.players.me.id === leftId //\n      ? NOBODY\n      : findMe(all, worldState.players.me.id);\n  return {\n    ...worldState,\n    players: { all, me },\n  };\n}\n\nfunction handleGameConfigMessage(\n  worldState: WorldState,\n  { text }: GameConfigMessage,\n): WorldState {\n  const textInput = makeTextInput(text);\n  const { lines } = textInput;\n  return { ...worldState, textInput, lines };\n}\n\nfunction handleGameReadyMessage(\n  intl: IntlShape,\n  worldState: WorldState,\n  { gameState, countDown }: GameReadyMessage,\n): WorldState {\n  switch (gameState) {\n    case GameState.WAITING: {\n      return {\n        ...worldState,\n        gameState,\n        players: resetPlayers(worldState.players),\n        ticker: intl.formatMessage({\n          id: \"multiplayer.ticker.waitingMorePlayers\",\n          defaultMessage: \"Waiting for more players...\",\n        }),\n      };\n    }\n    case GameState.STARTING: {\n      return {\n        ...worldState,\n        gameState,\n        players: resetPlayers(worldState.players),\n        ticker: intl.formatMessage(\n          {\n            id: \"multiplayer.ticker.countDown\",\n            defaultMessage: \"Start in {countDown}\",\n          },\n          { countDown },\n        ),\n      };\n    }\n    case GameState.RUNNING: {\n      return {\n        ...worldState,\n        gameState,\n        timer: new Timer(),\n        ticker: intl.formatMessage({\n          id: \"multiplayer.ticker.raceStarted\",\n          defaultMessage: \"Race started!\",\n        }),\n      };\n    }\n    case GameState.FINISHED: {\n      if (worldState.players.me.finished) {\n        return {\n          ...worldState,\n          gameState,\n        };\n      } else {\n        return {\n          ...worldState,\n          gameState,\n          ticker: intl.formatMessage({\n            id: \"multiplayer.ticker.raceFinished\",\n            defaultMessage: \"Race finished!\",\n          }),\n        };\n      }\n    }\n    default:\n      throw new Error(); // Unreachable.\n  }\n}\n\nfunction handleGameWorldMessage(\n  intl: IntlShape,\n  worldState: WorldState,\n  message: GameWorldMessage,\n): WorldState {\n  const players = updatePlayerStates(worldState, message);\n  if (players.me.spectator) {\n    return {\n      ...worldState,\n      players,\n      ticker: intl.formatMessage({\n        id: \"multiplayer.ticker.waitingNextRace\",\n        defaultMessage: \"Zzz... Wait for the next race\",\n      }),\n    };\n  } else if (players.me.finished) {\n    if (players.me.position === 1) {\n      return {\n        ...worldState,\n        players,\n        ticker: intl.formatMessage({\n          id: \"multiplayer.ticker.winnerPosition\",\n          defaultMessage: \"You won the race!\",\n        }),\n      };\n    } else {\n      return {\n        ...worldState,\n        players,\n        ticker: intl.formatMessage(\n          {\n            id: \"multiplayer.ticker.finishedPosition\",\n            defaultMessage: `You finished {position}!`,\n          },\n          { position: positionName(players.me.position) },\n        ),\n      };\n    }\n  } else {\n    return {\n      ...worldState,\n      players,\n      ticker: intl.formatMessage({\n        id: \"multiplayer.ticker.start\",\n        defaultMessage: \"GO!\",\n      }),\n    };\n  }\n}\n\nfunction updatePlayerStates(\n  worldState: WorldState,\n  { playerState }: GameWorldMessage,\n): PlayerList {\n  const players = new Map<number, Player>(\n    worldState.players.all.map((player) => [player.id, player]),\n  );\n  for (const [\n    id,\n    { spectator, finished, position, offset, speed, errors },\n  ] of playerState.entries()) {\n    const player = players.get(id);\n    if (player != null) {\n      if (\n        player.spectator !== spectator ||\n        player.finished !== finished ||\n        player.position !== position ||\n        player.offset !== offset ||\n        player.speed !== speed ||\n        player.errors !== errors\n      ) {\n        const progress = offset / worldState.textInput.length;\n        players.set(player.id, {\n          id: player.id,\n          user: player.user,\n          spectator,\n          finished,\n          position,\n          offset,\n          speed,\n          errors,\n          progress,\n        });\n      }\n    }\n  }\n  const all = [...players.values()];\n  const me = findMe(all, worldState.players.me.id);\n  return { all, me };\n}\n\nfunction resetPlayers(list: PlayerList): PlayerList {\n  const all = list.all.map((player) => ({\n    id: player.id,\n    user: player.user,\n    spectator: false,\n    finished: false,\n    position: 0,\n    offset: 0,\n    speed: 0,\n    errors: 0,\n    progress: 0,\n  }));\n  const me = findMe(all, list.me.id);\n  return { all, me };\n}\n\nfunction mergePlayers(\n  all: readonly Player[],\n  snapshot: readonly BasicPlayer[],\n): readonly Player[] {\n  const curr = new Map<number, Player>(\n    all.map((player) => [player.id, player]),\n  );\n  const next = new Map<number, BasicPlayer>(\n    snapshot.map((player) => [player.id, player]),\n  );\n  for (const player of curr.values()) {\n    if (next.get(player.id) == null) {\n      curr.delete(player.id);\n    }\n  }\n  for (const player of next.values()) {\n    if (curr.get(player.id) == null) {\n      curr.set(player.id, {\n        id: player.id,\n        user: player.user,\n        spectator: false,\n        finished: false,\n        position: 0,\n        offset: 0,\n        speed: 0,\n        errors: 0,\n        progress: 0,\n      });\n    }\n  }\n  return [...curr.values()];\n}\n\nfunction findMe(all: readonly Player[], id: number): Player {\n  return all.find((player) => player.id === id) ?? NOBODY;\n}\n","import { type ClassName } from \"@keybr/widget\";\nimport { memo } from \"react\";\n\nexport const FlagImage = memo(function FlagImage({\n  className,\n  width = 200,\n  height = 200,\n}: {\n  className?: ClassName;\n  width?: number;\n  height?: number;\n}) {\n  return (\n    <svg\n      className={className}\n      width={width}\n      height={height}\n      viewBox=\"0 0 200 200\"\n    >\n      <path\n        fill=\"#fff\"\n        d=\"M132.28 11.82a63.16 63.16 0 0 0-3.298.028l-7.203.27-6.075 14.83c-3.34 8.158-6.106 15.31-6.144 15.892-.05.763 1.785 1.058 6.56 1.058 6.445 0 20.81 2.03 24.28 3.43.946.382 2.077.6 2.516.484.752-.197 16.49-29.075 16.55-30.363.04-.918-9.792-3.748-16.923-4.872-2.622-.413-6.71-.702-10.262-.758zM89.464 23.182a.312.312 0 0 0-.168.033c-.777.347-4.465 1.72-8.193 3.05-6.092 2.17-7.696 2.393-15.805 2.186l-9.026-.23-3.168 14.407c-1.744 7.924-3.336 14.85-3.538 15.393-.2.54.328 1.186 1.178 1.43 3.658 1.057 16.907-.066 21.836-1.85 2.77-1.003 5.334-2.122 5.7-2.487.364-.365 3.31-7.833 6.546-16.595 4.076-11.04 5.355-15.24 4.64-15.336zm16.475 22.476c-2.23.123-9.748 2.762-18.083 6.406l-8.5 3.717-5.7 15.458c-3.132 8.5-5.694 15.784-5.692 16.184.002.4.86.49 1.91.2A3463.2 3463.2 0 0 1 82.36 84.27l10.583-2.83 7.043-17.6c3.874-9.68 6.83-17.816 6.57-18.076-.09-.09-.3-.123-.618-.106zm-79.086 3.3c-1-.15-1.375 2.476-3.22 15.872-1.38 10.03-1.987 16.985-1.523 17.45.424.424 4.146 2.064 8.27 3.644 11.754 4.5 11.127 4.985 14.854-11.518 1.737-7.69 3.177-14.22 3.2-14.508.022-.29-1.62-.99-3.653-1.56-3.41-.955-13.022-5.97-17.112-8.928-.322-.233-.586-.416-.816-.45zm117.02.185l-8.962 17.082-8.963 17.08 5.543 3.107c3.05 1.71 8.784 5.76 12.746 9l7.205 5.89 8.87-17.646 8.872-17.648-2.092-2.25c-2.856-3.076-10.53-8.224-17.46-11.715l-5.757-2.9zM105.73 81.557c-6.148-.008-11.794.43-12.355 1.324-1.054 1.678-12.702 30.72-12.7 31.665.002.402 1.703.477 3.78.166 5.2-.78 18.134-.646 21.223.22l2.543.713 8.214-15.747 8.214-15.744-3.552-1.238c-2.57-.896-9.22-1.35-15.367-1.357zm-39.634 8.027l-3.938.646c-2.165.356-7.454.61-11.752.565-6.534-.07-7.88.144-8.228 1.3-.868 2.885-6.414 28.41-6.414 29.516 0 .924 1.85 1.11 9.095.92l9.095-.24 6.07-16.354 6.07-16.352z\"\n      />\n      <path\n        fill=\"#000\"\n        d=\"M121.97 10.576c-12.14.886-25.13 7.775-29.98 9.617l-12.998 35.35s21.783-10.512 29.11-10.705l13.87-34.262zM29.66 12.56l-4.824 34.073c12.157 9.924 24.11 12.71 24.11 12.71l7.322-33.005S43.595 24.11 29.66 12.56zm131.04 3.76l-17.075 32.477s15.36 5.39 26.82 17.45l15.653-31.34.582-1.198s-10.33-12.535-25.98-17.39zm-17.075 32.477c-.01-.004-12.9-4.938-29.273-4.508a51.4 51.4 0 0 0-6.247.554L93.085 81.96c-5.736.934-18.51 4.82-26.37 6.99l-12.74 34.645c5.857-.154 20.134-6.24 24.83-6.365l14.277-35.267s7.405-1.263 14.72-1.455c7.312-.192 17.394 3.3 17.405 3.305h.004l18.416-35.018zm-18.418 35.017l-17.283 33.444c14.475 3.87 28.162 18.62 28.162 18.62l16.04-32.79s-13.19-14.067-26.92-19.273zM78.987 55.55s-9.628 4.817-19.14 5.067c-6.093.16-10.898-1.267-10.898-1.267l-6.765 30.47s6.326 1.01 11.53.87c5.21-.134 12.995-1.735 12.995-1.735l12.28-33.408h-.002zM19.917 81.5l-5.065 35.816c11.51 5.596 19.85 6.446 19.85 6.446l7.48-33.94s-11.624-1.9-22.266-8.324z\"\n      />\n      <path\n        fill=\"none\"\n        stroke=\"#000\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        d=\"M108.55 191.535l84.07-169.82m-5.94 11.993s-19.825-24.748-60.493-23.68c-24.755.65-38.345 17.064-58.774 17.6C46.996 28.164 29.66 12.56 29.66 12.56L14.853 117.316s13.607 7.674 31.125 7.214c17.51-.46 25.794-8.71 49.527-9.332 22.508-.59 40.58 20.682 40.58 20.682l50.597-102.172z\"\n      />\n    </svg>\n  );\n});\n","import { LCG, randomSample } from \"@keybr/rand\";\nimport { type ClassName } from \"@keybr/widget\";\nimport { type FunctionComponent, memo } from \"react\";\n\nconst colors: readonly string[] = [\n  \"#2c3e50\",\n  \"#7f8c8d\",\n  \"#436eee\",\n  \"#009acd\",\n  \"#b0e0e6\",\n  \"#389e4b\",\n  \"#bf3eff\",\n  \"#ff69b4\",\n  \"#c0392b\",\n  \"#e67e22\",\n  \"#ffb90f\",\n];\n\ntype ShapeProps = {\n  className?: ClassName;\n  width: number;\n  height: number;\n  color: string;\n};\n\nconst Shape0 = memo(function Shape0({\n  className,\n  width,\n  height,\n  color,\n}: ShapeProps) {\n  return (\n    <svg\n      className={className}\n      width={width}\n      height={height}\n      viewBox=\"0 0 80 48\"\n    >\n      <path\n        fill=\"#050708\"\n        d=\"M14.2 31.64a8.3 8.3 0 016.4.66 8.28 8.28 0 01.98 13.88 8.32 8.32 0 01-4.86 1.68h-.24a8.3 8.3 0 01-2.28-16.23z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M9.82 39.64c0-2.98 2.1-5.8 4.9-6.75-.44.47-.99.82-1.4 1.31a9.67 9.67 0 00-2.03 8.65c.16.7.46 1.37.72 2.06a7.17 7.17 0 01-2.18-5.27zM16.3 36.48a3.25 3.25 0 01.9 6.43 3.24 3.24 0 01-.9-6.42z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M63.28 31.64a8.3 8.3 0 016.4.66 8.3 8.3 0 01-3.88 15.56h-.24a8.3 8.3 0 01-2.28-16.23z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M58.9 39.64c0-2.98 2.1-5.8 4.9-6.75-.44.47-.99.82-1.4 1.31a9.67 9.67 0 00-2.03 8.65c.16.7.47 1.37.73 2.06a7.17 7.17 0 01-2.19-5.27zM65.39 36.48a3.25 3.25 0 01.89 6.43 3.24 3.24 0 01-.9-6.42z\"\n      />\n      <path\n        fill={color}\n        d=\"M77.62 25.45c-.86-2.58-1.98-3.44-4.81-4.38-2.83-.94-15.02-1.54-17.26-1.72-.77-1.2-3.17-7.04-4.55-9.78-1.37-2.75-3.86-4.3-6.26-4.12-2.4.17-14.77-.09-21.9.34-7.12.43-12.87 8.67-16.82 16.05A43.99 43.99 0 00.58 40s2.75-.02 5.15-.01c.61-2.05 1.6-5.57 5.9-5.69 4.82-.13 6.62 0 9.26.07 2.57.06 4.13 1.82 6.23 7.48 5.77-.03 21.57-.15 27.94-.16 1.22-6.02 2.26-8.64 7.62-10.22 3.85-1.14 9.53-.39 11.52 3.39.72 1.36 1.16 3.74 1.43 6.97.43.01.53.11.53.11s1.03-4.55 1.8-7.55.52-6.35-.34-8.93zM29.1 22.03c0 1.03-.16 2.7-2 2.7l-13.48-.06c-1.74 0-2.1-1.32-1.7-3.06.38-1.74 3.89-9.47 6.2-10.92 2.32-1.45 4.67-1.8 8.82-1.38 1.48.13 2.23 1.25 2.23 2.77 0 2-.07 8.92-.07 9.95zm22.6 2.67l-16.77.03c-1.51 0-2.48-1.45-2.48-2.51V11.79c0-1.38 1.1-2.64 2.45-2.64s8.11-.07 9.6-.07c1.47 0 3.56.71 4.43 2.61.87 1.9 3.55 8.34 4.1 9.98.54 1.64.47 3.03-1.33 3.03z\"\n      />\n      <path\n        fill=\"#ffffff\"\n        d=\"M23.6 7.05c-1.4.05-2.81.26-4.14.81a11.5 11.5 0 00-4.42 3.52A37.45 37.45 0 0011.9 16a73.44 73.44 0 00-2.65 4.9c1.08-1.52 2.1-3.06 3.14-4.59 1.04-1.52 2.07-3.05 3.23-4.45a12.45 12.45 0 014.07-3.48c1.61-.8 3.46-1.08 5.3-1.32-.47-.02-.93-.02-1.4 0zm41.95 16.89c-6.68-.03-10.3.92-12.52 1.65l23.48.01c.75 0-.22-1-3.19-1.27a89.87 89.87 0 00-7.77-.4zm-2.77 4.84a9.32 9.32 0 00-5.2 1.68 8.62 8.62 0 00-3.45 7.7c.21-1.42.73-2.72 1.4-3.9a9.74 9.74 0 012.64-3 9.76 9.76 0 013.65-1.64c1.33-.3 2.73-.4 4.15-.38a11.1 11.1 0 00-3.2-.46zM16.73 31.5c-1.78.02-3.55.03-5.34.12-.89.05-1.82.13-2.7.48a5.3 5.3 0 00-2.1 1.72 5.79 5.79 0 012.26-1.26c.81-.2 1.68-.19 2.56-.17 1.76.07 3.54.1 5.32.1l2.66-.02c.9-.02 1.75-.08 2.58.05.84.12 1.66.38 2.42.78.75.4 1.52.9 1.92 1.68a2.47 2.47 0 00-.65-1.18c-.3-.34-.64-.65-1.02-.92a7.15 7.15 0 00-2.52-1.13c-.92-.23-1.86-.18-2.73-.22l-2.66-.03z\"\n      />\n      <path\n        fill=\"#d7eef4\"\n        d=\"M44.49 9.08c-1.48 0-8.24.07-9.6.07-1.34 0-2.44 1.25-2.44 2.64v10.43c0 1.06.97 2.51 2.48 2.51l16.77-.03c1.8 0 1.87-1.39 1.32-3.03-.54-1.64-3.22-8.08-4.09-9.98-.87-1.9-2.96-2.6-4.44-2.6zm-20.35.07c-2.52-.01-4.28.46-6.02 1.54-2.31 1.45-5.82 9.18-6.2 10.92-.4 1.74-.04 3.06 1.7 3.06l13.49.06c1.83 0 2-1.67 2-2.7 0-1.03.06-7.96.06-9.95 0-1.52-.74-2.64-2.22-2.77-1.04-.1-1.97-.16-2.8-.16z\"\n      />\n      <path\n        fill=\"#b5b5b6\"\n        d=\"M77.83 25.56c-.51 0-.92.47-.92 1.05v2.75c0 .57.41 1.04.92 1.04h1.25c.5 0 .92-.47.92-1.04V26.6c0-.58-.41-1.05-.92-1.05h-1.25zm-75.14.95c-.5 0-.92.47-.92 1.04v2.76c0 .57.41 1.04.92 1.04h1.25c.5 0 .92-.47.92-1.04v-2.76c0-.57-.41-1.04-.92-1.04H2.69zM1.3 32.6c-.71 0-1.29.57-1.29 1.28v3.42c0 .7.58 1.28 1.29 1.28h1.74c.7 0 1.28-.57 1.28-1.28v-3.42c0-.7-.57-1.28-1.28-1.28H1.29zm75.36 2.12c-.71 0-1.29.58-1.29 1.29v3.41c0 .71.58 1.29 1.3 1.29h1.73c.71 0 1.29-.58 1.29-1.29V36c0-.71-.58-1.29-1.3-1.29h-1.73z\"\n      />\n      <path\n        fill=\"#ffffff\"\n        d=\"M78.19 26.6c.29 0 .52.27.52.6v1.57c0 .32-.23.59-.52.59h.62c.29 0 .52-.27.52-.6V27.2c0-.33-.23-.6-.52-.6h-.62zm-75.23.95c-.29 0-.52.27-.52.6v1.56c0 .33.23.6.52.6h.62c-.29 0-.52-.27-.52-.6v-1.56c0-.33.23-.6.52-.6h-.62zm-1.36 6.1a.83.83 0 00-.83.83v2.2c0 .45.37.82.83.82h.64a.83.83 0 01-.82-.83v-2.19c0-.45.37-.82.82-.82H1.6zm75.84 2.13c.45 0 .82.37.82.83v2.19c0 .45-.37.83-.82.83h.64c.46 0 .83-.38.83-.83v-2.2a.83.83 0 00-.83-.82h-.64z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M74.2 34.85c-1.99-3.78-7.67-4.53-11.52-3.4-4.89 1.45-6.18 3.77-7.3 8.72H26.46c-1.78-4.33-3.27-5.76-5.57-5.81-2.64-.07-4.44-.2-9.27-.07-4.3.12-5.28 3.64-5.9 5.69l1.5.01c1.16-3.36 2.59-4.48 5.11-4.38 1.45.06 2.96.06 7.43.06 4.46 0 4.98 4.63 5.58 6.18h31.34l.06-.29c.74-4.27 1.64-5.96 3.33-7.29a8.73 8.73 0 015.65-1.86c5.28 0 6.75 2.48 7.6 3.94.86 1.46.7 4.47 1.12 5.58.55-.1.93-.12 1.19-.1-.27-3.24-.7-5.62-1.42-6.98z\"\n      />\n    </svg>\n  );\n});\n\nconst Shape1 = memo(function Shape1({\n  className,\n  width,\n  height,\n  color,\n}: ShapeProps) {\n  return (\n    <svg\n      className={className}\n      width={width}\n      height={height}\n      viewBox=\"0 0 80 48\"\n    >\n      <path\n        fill={color}\n        d=\"M78.06 27.39c-4.5-4.12-15.43-5.6-17.62-5.84l-.01-.06a7.46 7.46 0 00-3.66 1.3c-1.1.68-2.22-.24-2.65-1.21-.42-.98-3.06-8.31-3.31-9.16-.25-.85.22-1.45 1.14-1.6.8-.13 2.58-.24 3.5-.45a3.67 3.67 0 00-.1-.15c-.55-.82-2.3-2.22-5.64-2.97a58.7 58.7 0 00-17.9-1.12c-5.88.54-9.83 2.23-11.56 4.73.5-.03 1.12 0 1.76.16.88.23 1.65.53 1.75.98.21.95-1.07 5.2-1.25 5.68-.17.48-.77 2.5-2.47 2.97-1.57.44-2.87.1-3.82-.14-.59.2-1.16.42-1.71.7-.62-.38-1.3-.83-2.07-1.4-2.28-1.66-3.05-2.4-3.77-3.46 3.33.1 5.71-.5 6.32-1.9a214.8 214.8 0 00-14.96-1.1C-.26 15.5 1.46 16.96 4 16.9a21.84 21.84 0 006.3 8.78 15.92 15.92 0 00-1.09 6.27c0 3.99.85 10.33 2.7 10.33l16.09.77 28.95.05s15 .09 16.16 0c1.75-.12 2.05-.95 2.7-1.7 2.1-2.41 3.14-7.6 3.5-9.13.42-1.84.77-3.1-1.25-4.9zm-31.34-3.64c-2.75-.03-15.1-.43-16.1-.48-1-.05-3.67-.3-3.6-2.3.07-1.66.43-6.16.46-7.1.02-.95.8-2.03 2.24-2.1 1.45-.07 6.49-.2 6.49-.2 1.6 0 7.78-.12 8.5-.12.73 0 1.75.4 2.2 1.94a207.2 207.2 0 012.02 8c.13.8.55 2.38-2.21 2.36z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M62.35 30.75a8.75 8.75 0 016.74.7 8.75 8.75 0 01-4.1 16.4h-.24a8.76 8.76 0 01-2.4-17.11z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M57.73 39.23c0-3.14 2.2-6.12 5.16-7.11-.47.49-1.04.85-1.47 1.38a10.2 10.2 0 00-2.14 9.1c.16.77.48 1.47.76 2.19a7.56 7.56 0 01-2.3-5.56zm6.83-3.33a3.43 3.43 0 01.94 6.78 3.42 3.42 0 01-.94-6.77z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M17.56 30.75a8.75 8.75 0 016.75.7 8.74 8.74 0 01-4.1 16.4h-.24a8.76 8.76 0 01-2.4-17.11z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M12.95 39.23c0-3.14 2.2-6.12 5.16-7.11-.47.49-1.04.85-1.47 1.38a10.2 10.2 0 00-2.15 9.1c.17.77.5 1.47.77 2.19a7.57 7.57 0 01-2.3-5.56zm6.83-3.33a3.43 3.43 0 01.94 6.78 3.42 3.42 0 01-.94-6.77z\"\n      />\n      <path\n        fill=\"#d7eef4\"\n        d=\"M20.04 20.72c1.7-.47 2.3-2.5 2.47-2.97.17-.47 1.46-4.73 1.25-5.7-.1-.44-.88-.74-1.75-.96a5.68 5.68 0 00-1.77-.16c-.2.3-.38.6-.53.93-.97 2.18-2.5 5.5-3.46 8.7l-.03.02c.95.24 2.25.58 3.82.14zm30.76-8.24c.26.86 2.9 8.2 3.33 9.17.42.97 1.54 1.9 2.64 1.22a7.36 7.36 0 013.66-1.31c-.6-3.6-4.24-9.92-4.99-11.12-.9.2-2.68.32-3.48.45-.93.15-1.4.75-1.15 1.6zm-1.86 9c-.1-.56-1.58-6.47-2.03-8.02-.44-1.54-1.47-1.94-2.2-1.94-.72 0-6.9.12-8.5.12 0 0-5.04.12-6.49.2-1.44.07-2.22 1.15-2.24 2.1-.03.94-.4 5.44-.45 7.1-.02.35.06.65.19.9.62 1.18 2.58 1.36 3.4 1.4 1 .05 13.35.45 16.1.48 1.42 0 2-.4 2.2-.9.2-.5.08-1.06.02-1.45z\"\n      />\n      <path\n        fill=\"#e6e6e6\"\n        d=\"M79.62 31.38a11.67 11.67 0 01-3.25.03 7.08 7.08 0 01-3-1.12 7 7 0 003.03.7 9.57 9.57 0 003.05-.44.43.43 0 11.19.83zm-.44 2.3a27.2 27.2 0 01-2.42-.29 7.26 7.26 0 01-2.32-.75c.76.27 1.56.32 2.36.32.79 0 1.58-.07 2.38-.14a.43.43 0 110 .85zm-.33 1.88a13.43 13.43 0 01-2.08-.38 9.93 9.93 0 01-1.97-.69 10 10 0 002.03.27 15.82 15.82 0 002.03-.05c.24-.03.45.15.47.38a.43.43 0 01-.47.47zm-.79 2.02a11.9 11.9 0 01-2.8-1.3c.97.33 1.96.4 2.98.47a.43.43 0 11-.17.84z\"\n      />\n      <path\n        fill=\"#ffffff\"\n        d=\"M76.97 27.6a3.52 1.2 18.72 01-3.72 0 3.52 1.2 18.72 01-2.94-2.26 3.52 1.2 18.72 013.71 0 3.52 1.2 18.72 012.95 2.26zM69.52 29.48a9.48 9.48 0 00-2.6-.6c-.88-.11-1.77-.13-2.64-.05-1.75.16-3.46.66-4.88 1.63a9.46 9.46 0 00-3.27 3.94 19.4 19.4 0 00-1.43 5.13 13.73 13.73 0 01.83-5.4 9.08 9.08 0 013.4-4.38 9.68 9.68 0 015.31-1.57c1.85 0 3.73.33 5.28 1.3zm-40.56 3.5a6.75 6.75 0 00-1.59-2.22 10.75 10.75 0 00-7.32-2.83A9.97 9.97 0 0015 29.42c-.77.46-1.48 1.03-2.13 1.68a17.5 17.5 0 00-1.82 2.08 11.6 11.6 0 013.58-4.3 9.43 9.43 0 015.4-1.8 10.12 10.12 0 017.65 3.41 6.2 6.2 0 011.28 2.5zm.87 6.84a172.64 172.64 0 0111.87-.43c1.97.01 3.95.02 5.93.1l2.97.12c.98.07 1.97.11 2.96.2-.99.1-1.98.15-2.96.22l-2.97.12a196 196 0 01-5.93.1c-1.98-.02-3.96-.03-5.94-.1-1.97-.07-3.95-.16-5.93-.33zM1.4 13.98l12.59.86-12.61.25a.56.56 0 11.03-1.11zm25.45-5.65a51.87 51.87 0 0118.88-.71c2.1.32 4.18.77 6.2 1.55a.43.43 0 11-.33.8v-.01c-1.9-.8-3.93-1.33-5.98-1.71a51.79 51.79 0 00-18.77.09z\"\n      />\n    </svg>\n  );\n});\n\nconst Shape2 = memo(function Shape2({\n  className,\n  width,\n  height,\n  color,\n}: ShapeProps) {\n  return (\n    <svg\n      className={className}\n      width={width}\n      height={height}\n      viewBox=\"0 0 80 48\"\n    >\n      <path\n        fill=\"#050708\"\n        d=\"M13.82 30.38a9.98 9.98 0 017.7.8 9.96 9.96 0 014.8 11.26 9.96 9.96 0 01-9.48 7.45h-.28A10 10 0 017.9 35.3a10.03 10.03 0 015.92-4.92z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M8.56 40a8.8 8.8 0 015.89-8.1c-.54.55-1.2.97-1.68 1.56a11.63 11.63 0 00-2.45 10.4c.19.86.56 1.66.87 2.48A8.62 8.62 0 018.57 40h-.01zM16.35 36.2a3.91 3.91 0 011.07 7.74 3.9 3.9 0 01-1.07-7.72z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M55.26 30.38a9.95 9.95 0 0112.5 12.05 9.96 9.96 0 01-9.47 7.46H58a10 10 0 01-8.66-14.59 10.03 10.03 0 015.91-4.92z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M50 40a8.8 8.8 0 015.89-8.1c-.54.55-1.2.97-1.68 1.56a11.63 11.63 0 00-2.45 10.4c.19.86.56 1.66.87 2.48A8.63 8.63 0 0150.01 40H50zM57.79 36.2a3.91 3.91 0 011.07 7.74 3.9 3.9 0 01-1.07-7.72z\"\n      />\n      <path\n        fill=\"#d5f6ff\"\n        d=\"M48.66 10.73c1.3.86 9.93 7.26 12.09 10.93 2.47-.55 2.65-.64 3.35-1.28-.9-1.1-3.29-3.55-5.6-5.41a108.86 108.86 0 00-8.69-6.29c.03.72-.33 1.27-1.15 2.05z\"\n      />\n      <path\n        fill={color}\n        d=\"M77.22 30.07C73.98 22.23 66 20.44 64.2 20.3l-.1.09c-.7.64-.88.73-3.35 1.28-2.16-3.67-10.8-10.07-12.09-10.93.83-.78 1.18-1.33 1.15-2.05v-.13c-.06-.52-1.36-1.13-1.86.02-.25.55-.46.9-1.14 1.4-.64.5-.5 1.44.22 2.11 1.1 1.06 3.26 3.13 5.23 4.83-.57.65-1 1-1.87 1.94 0 0-28.98.08-30.5 0-.5-.72-2.8-3.02-3.66-3.88-1.59-.07-1.8.5-2.45.94-.8-.72-.65-.5-1.51-1.08-1.08.72-1.87 2.37-2.16 4.67-2.44 1.44-3.38 4.39-3.52 5.68C3.57 26.84.9 31.73.1 36.18c-.79 4.47 2.74 7.42 3.67 7.49.94.07 3.1-1.37 3.53-2.38-.29-1-.72-11.22 9.2-11.14 9.93.07 10.07 11.43 10.43 13.8l21.65-.07c0-.93-1.91-9.16 4.49-12.54C59.09 28.17 64 31.02 66.3 34c1.67 2.16 2.16 6.3 2.13 9.02 2.38 0 6.55.8 9.5-1.73 3.77-3.22 1.65-8.77-.72-11.22z\"\n      />\n      <path\n        fill=\"#ffffff\"\n        d=\"M12.19 15.53a.2.2 0 00-.12.06 3.61 3.61 0 00-.91 2.1s0 .02.02.02l.03-.01c.2-.65.6-1.21 1.04-1.67 1.6 1.12 3.3 2.07 4.93 3.1l2.56 1.6c.84.52 1.7 1.04 2.52 1.61h.04v-.04c-1.61-1.2-3.28-2.32-4.94-3.44-1.67-1.1-3.3-2.29-5.02-3.3h-.02a.2.2 0 00-.13-.03zM52.4 16.9c1.16 1.2 2.42 2.35 3.31 3.7.1.17.2.34.26.5.03.08.04.16.03.21a.9.9 0 01-.06.24c-.1.2-.59.27-.97.3-.8.08-1.65.08-2.48.09H27.42l-5.01.21 5.01.22H52.5c.84 0 1.68 0 2.53-.09.21-.02.43-.05.65-.1.2-.06.5-.14.65-.43.07-.14.09-.25.11-.36.03-.17 0-.3-.04-.42-.07-.23-.2-.42-.31-.6C55 19 53.66 18 52.4 16.9zm8.3 6.35c-.45 0-.9.02-1.35.05-1.8.1-3.6.4-5.3 1.02a12.9 12.9 0 00-4.62 2.8 13.14 13.14 0 00-3 4.45c-1.34 3.2-1.62 6.67-1.57 10.07H29.03v.87h15.9v-.87h-.06c.09-3.4.51-6.84 1.94-9.9a12.62 12.62 0 013.05-4.15 12.16 12.16 0 014.45-2.47c1.64-.51 3.36-.73 5.09-.77 1.73-.03 3.44.12 5.12.47a20.18 20.18 0 017.02 2.92 15.1 15.1 0 011.89 1.55l.02.03.03.02a.87.87 0 001.2-1.24c-.4-.38-.73-.64-1.11-.93a17.2 17.2 0 00-3.59-2.06 21.69 21.69 0 00-5.22-1.55c-1.35-.22-2.7-.32-4.06-.3zm-47.5.37c-.38 0-.74.02-1.1.05-.7.08-1.4.2-2.08.35-.7.17-1.35.34-2.09.67l-.05.02a.86.86 0 10.8 1.53h.02a9.83 9.83 0 011.72-.65 15.81 15.81 0 012.8-.52 18.12 18.12 0 012.89.15c2.56.35 5.04 1.35 7.1 2.97a14.85 14.85 0 014.6 6.3 18.3 18.3 0 011.15 7.87c.32-2.67.12-5.43-.74-8.02a15.5 15.5 0 00-4.46-6.81 15.7 15.7 0 00-7.44-3.58 18.55 18.55 0 00-3.12-.33z\"\n      />\n      <path\n        fill=\"#fcee21\"\n        d=\"M8.08 24.58A7.18 7.18 0 002.28 30s1.6.8 3.83-.27c1.34-.63 3.14-2.8 1.97-5.15zm63.4 1.53c-.39-.03-.7.05-.88.3-.93 1.29 1.94 5.53 4.03 5.46 1.36-.05 2.52-1.22 2.09-2.59-.26-.8-3.52-3.05-5.23-3.17zM20.72 15.26c-1.65 0-2.08 2.23-1.65 2.73.43.5 2.3 2.59 3.56 4 0 0 .1-2.56.1-3.64s-.35-3.1-2-3.1zm15.07.24c-1-.09-1.78.85-1.83 1.55-.07.94-.08 4.82-.08 4.82h4.68s-.43-1.08-1-2.08c.14-.58.71-2.59-.73-3.81-.36-.3-.71-.45-1.04-.48z\"\n      />\n    </svg>\n  );\n});\n\nconst Shape3 = memo(function Shape3({\n  className,\n  width,\n  height,\n  color,\n}: ShapeProps) {\n  return (\n    <svg\n      className={className}\n      width={width}\n      height={height}\n      viewBox=\"0 0 80 48\"\n    >\n      <path\n        fill={color}\n        d=\"M4.16 41C2.53 40.66.25 39.54.13 37.44c-.13-2.2-.59-3.79 1.6-6.69.94-1.25 1.14-1.4 1.6-1.89 0-2.03-.44-6.54 2.83-6.97 2.62-2.76 13-11.34 13.52-11.63-.07-.37-.51-1.02 1.23-1.16 1.75-.15 16.73-.63 21.15.29 14.68 3.05 26.1 11.99 31.32 15.11 5.24 3.13 6.54 11.63 6.62 13.38.07 1.74-1.46 4.8-3.13 5.08-2.58.2-8.84.65-19.44-.14-17.44-1.31-34.63.14-34.63.14z\"\n      />\n      <path\n        fill=\"#fbb03b\"\n        d=\"M3.33 28.4s1.55.86 1.81.47c.27-.4.6-3.2.23-4.25-.38-1.04-1.52-.83-1.52-.83s-.3.4-.45 1.9c-.13 1.31-.07 2.71-.07 2.71z\"\n      />\n      <path\n        fill=\"#ffffff\"\n        d=\"M69.46 26.44c1.67 0 4.44.4 5.23 1.27.8.87 1.38 2.1 1.6 4-1.92-3.46-6.83-5.27-6.83-5.27z\"\n      />\n      <path\n        fill=\"#d7eef4\"\n        d=\"M42.18 9.42c-.4.9.46.97 1.12 1.25.69.3 5.9 2.2 10.53 4.61 5.18 2.7 12.1 6.76 13.01 7.3.91.55 2.4 1.79 2.95 1.79.54 0 1.49.04 3.6.14C68.16 21.4 56.8 12.5 42.17 9.42zm-22.53.74c0 .04.02.08.03.11-.51.29-10.86 8.83-13.5 11.61 2.14.22 6.28.7 7.54.56 1.34-1.49 5.96-8.03 6.57-9.12.62-1.09 1.35-2.02.4-2.87-.25-.23-.57-.31-1.04-.3zm15.45.83c-3.02 0-7.17.08-9.1.08-2.58 0-2.8 1.02-3.42 1.85a210 210 0 00-4.57 7.6c-.59 1.01-1.28 2 0 1.96 1.27-.04 1.89 0 3.12 0 0 0 25.15.76 29.58.83 3.92.07 4.83-1.96 5.45-2.8.45-.6.55-1.15.04-1.52a63.42 63.42 0 00-9.01-5.21c-4.49-2.15-7.02-2.64-9.56-2.75A67.3 67.3 0 0035.1 11z\"\n      />\n      <path\n        fill=\"#fbb03b\"\n        d=\"M62.83 26.15h-2.94a.93.93 0 00-.4 1.76 13.3 13.3 0 013.68-1.7.9.9 0 00-.34-.06z\"\n      />\n      <path\n        fill=\"#ffffff\"\n        d=\"M6.03 22.06c.35.1.69.24 1.02.38.34.14.69.26 1.04.35.7.2 1.43.32 2.15.4 1.45.2 2.9.28 4.36.33 2.91 0 5.8.07 8.72.14l17.43.5 17.43.55 8.71.26 2.18.01h1.1a8.95 8.95 0 013.17.5c.67.26 1.34.6 1.8 1.16-.43-.6-1.1-.96-1.76-1.26a8.13 8.13 0 00-3.21-.68l-1.09-.05-2.18-.11-8.71-.27-17.43-.55-17.43-.5c-2.9-.06-5.82-.13-8.72-.13-1.45 0-2.9 0-4.35-.1-.72-.06-1.44-.15-2.14-.3a8.9 8.9 0 01-1.05-.3c-.34-.12-.68-.25-1.04-.33zm7.79 3.82A12.15 12.15 0 003.4 31.46c-1.19 1.85 3.67-4.1 10.38-4 6.72.1 11.23 5.63 9.81 3.61a12.14 12.14 0 00-9.78-5.2zm50.32.1c-1.52.11-3.02.6-4.38 1.35a10.2 10.2 0 00-5.26 7.38c-.25 1.53-.18 3.1.15 4.58.03-1.52.15-3.02.51-4.45a11.43 11.43 0 014.95-6.93 16.36 16.36 0 014.03-1.93z\"\n      />\n      <path\n        fill=\"#d7eef4\"\n        d=\"M28.7 23.59c-.19 0-.37.03-.55.08l.3 4.03c.08.01.17.03.26.03h.98a2.07 2.07 0 100-4.14h-.98zm-2.93 7.1c-.64 0-1.15.52-1.15 1.15l.74 2.57c.22.76.52 1.15 1.15 1.15h1.15c.64 0 1.15-.52 1.15-1.15 0 0-.57-1.92-.74-2.57-.16-.59-.52-1.15-1.15-1.15h-1.15zm5.13.07c-.63 0-1.14.51-1.14 1.15l.74 2.57c.18.66.51 1.15 1.15 1.15h16.28c.63 0 .87-.58 1.15-1.15.88-1.83 1.15-1.87 1.35-2.57.18-.61-.52-1.15-1.15-1.15H30.9zm22.37.36c-.64 0-.76.42-1.15 1.15l-1.42 2.57c0 .64.1 1.15 1.15 1.15h.65c.64 0 .7-.33 1.15-1.15l1.42-2.57c0-.63-.16-1.15-1.15-1.15h-.65z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M21.93 43.16l.67-2.35 3.87-.08c7.52-.3 18.9-.76 31.06.08l1.06 2.34c-12.04-.84-24.56-.54-32.03-.24z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M10.74 28.47a9.97 9.97 0 017.69.8 9.95 9.95 0 01-4.67 18.68h-.28a9.99 9.99 0 01-9.75-9.45v-.87c.05-1.47.43-2.93 1.1-4.25a10.02 10.02 0 015.91-4.92v.01z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M5.49 38.08a8.8 8.8 0 015.88-8.1c-.54.56-1.2.97-1.68 1.57a11.62 11.62 0 00-2.44 10.38c.18.86.55 1.66.86 2.47a8.62 8.62 0 01-2.62-6.32z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M12.97 32.13a6.08 6.08 0 011.67 12.03 6.06 6.06 0 01-1.67-12.01z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M13.27 34.29A3.9 3.9 0 0114.34 42a3.89 3.89 0 01-1.07-7.71zM63.87 28.47a9.97 9.97 0 017.68.8 9.96 9.96 0 01-4.66 18.68h-.28a9.98 9.98 0 01-8.65-14.57 10.03 10.03 0 015.91-4.92v.01z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M58.61 38.08a8.8 8.8 0 015.88-8.1c-.53.56-1.19.97-1.67 1.57a11.62 11.62 0 00-2.45 10.38c.19.86.56 1.66.87 2.47a8.6 8.6 0 01-2.62-6.32z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M66.1 32.13a6.09 6.09 0 016.85 5.69 6.11 6.11 0 01-5.19 6.34 6.06 6.06 0 01-1.67-12.01v-.02z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M66.4 34.29A3.9 3.9 0 0167.45 42a3.9 3.9 0 01-1.07-7.71z\"\n      />\n      <path\n        fill=\"#162d50\"\n        d=\"M48.58 39.79c-.1 0-.19 0-.3-.02-3.36-.35-13.5-.48-16.2-.22-.75.12-1.9.3-2.14-.77-.02-.1-2.1-10.25-2-15.11.09-4.62.52-12.5.53-12.58 0-.12.1-.22.23-.2.12 0 .2.1.2.22 0 .08-.43 7.96-.53 12.56-.1 4.82 1.98 14.92 2 15.02.1.5.51.61 1.66.43 2.72-.27 12.92-.14 16.3.22.69.07.7-.1.74-.4 1.57-8.03 5.2-10.14 7.37-11.4l.37-.22c1.88-1.12 2.63-1.9 2.84-2.96.02-.12.14-.2.25-.17.12.02.2.14.18.25-.24 1.21-1.04 2.06-3.05 3.26l-.37.21c-2.1 1.23-5.64 3.27-7.16 11.08-.06.56-.32.8-.92.8z\"\n      />\n    </svg>\n  );\n});\n\nconst Shape4 = memo(function Shape4({\n  className,\n  width,\n  height,\n  color,\n}: ShapeProps) {\n  return (\n    <svg\n      className={className}\n      width={width}\n      height={height}\n      viewBox=\"0 0 80 48\"\n    >\n      <path\n        fill=\"#050708\"\n        d=\"M16.21 27.73c2.62-.8 5.56-.5 7.96.83a10.3 10.3 0 01-4.83 19.33h-.3a10.34 10.34 0 01-10.08-9.78v-.9c.05-1.52.44-3.04 1.14-4.4 1.26-2.42 3.5-4.3 6.11-5.09v.01z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M10.77 37.68a9.1 9.1 0 016.09-8.39c-.56.58-1.23 1.01-1.73 1.63a12.02 12.02 0 00-2.53 10.74c.19.89.57 1.72.9 2.56a8.91 8.91 0 01-2.72-6.54zM18.82 33.75a4.04 4.04 0 011.11 8 4.03 4.03 0 01-1.1-7.99z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M54.42 27.73c2.63-.8 5.56-.5 7.96.83a10.3 10.3 0 01-4.83 19.33h-.3a10.34 10.34 0 01-10.08-9.78v-.9c.05-1.52.44-3.04 1.14-4.4 1.26-2.42 3.5-4.3 6.12-5.09v.01z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M48.98 37.68a9.1 9.1 0 016.09-8.39c-.56.58-1.23 1.01-1.73 1.63a12.02 12.02 0 00-2.53 10.74c.19.89.57 1.72.9 2.56a8.91 8.91 0 01-2.72-6.54zM57.03 33.75a4.05 4.05 0 014.56 3.78 4.06 4.06 0 01-3.45 4.21 4.03 4.03 0 01-1.1-7.98z\"\n      />\n      <path\n        fill=\"#d7eef4\"\n        d=\"M6.67 14.9c0 .03 32.59-.1 54.08-.18h-4.17c0-4.32-1.7-8.87-4.91-11.73H21.2C10.13 3 6.67 9.31 6.67 14.91z\"\n      />\n      <path\n        fill={color}\n        d=\"M19.15 24.16c7.18 0 13.2 4.48 14.74 10.46l8.48-.05c1.56-5.96 7.57-10.41 14.73-10.41 7.08 0 13.04 4.36 14.68 10.22l3.43-.02s-.17-5.63-.17-10.05c0-4.42-3.25-9.6-9.74-9.6h-4.55l-28.96.12V3h19.88A11.4 11.4 0 0043.93.1h-26.5C10.78.1 2.92 3.6 2.92 11.52s.17 12.94.17 23.3l1.27-.01c1.47-6.08 7.54-10.65 14.8-10.65zM21.2 2.99h6.15v11.86l-20.68.06c0-5.6 3.46-11.92 14.53-11.92z\"\n      />\n      <path\n        fill=\"#999999\"\n        d=\"M19.15 22.85a15.1 15.1 0 00-12.03 5.98h-2.5a4.62 4.62 0 100 9.24h1.9l.03-.1h1.57a11.04 11.04 0 0122.05 0h4.1v-.08h7.7v.09h4.1a11.04 11.04 0 0122.05 0h3.14l.02.09h4.1a4.61 4.61 0 100-9.24h-6.26a15.1 15.1 0 00-26.66 5.39h-8.68a15.14 15.14 0 00-14.63-11.37z\"\n      />\n      <path\n        fill=\"#ffffff\"\n        d=\"M19.15 24.9a12.8 12.8 0 018.88 4.2 12.28 12.28 0 013.17 8.88h2.05c-.04-.72-.14-1.43-.28-2.14h11.05v-1.36h-11.4a13.7 13.7 0 00-8.37-8.82c-1.65-.6-3.4-.84-5.1-.76zm37.95 0a12.8 12.8 0 018.88 4.2 12.3 12.3 0 013.17 8.88h2.05a13.95 13.95 0 00-4.5-9.61 13.45 13.45 0 00-9.6-3.47zM8.55 29.78l-2.1.17c-.7.07-1.38.06-2.15.23a4.07 4.07 0 00-2.98 2.94 3.77 3.77 0 013.1-2.26c.6-.04 1.34.07 2.03.11l2.1.17zm60.71 0v1.36l4.29-.17c.69-.04 1.42-.15 2.03-.11 1.28.1 2.54.96 3.1 2.26a4.07 4.07 0 00-2.98-2.94c-.77-.17-1.45-.16-2.15-.23z\"\n        opacity=\".99\"\n      />\n      <path\n        fill=\"#ffffff\"\n        d=\"M42.02.8l-.9.02-6.9.13-13.79.25-3.45.06c-1.15.02-2.32.1-3.45.35a9.56 9.56 0 00-3.17 1.25c-.95.6-1.7 1.4-2.32 2.26a8.67 8.67 0 012.4-2.16 9.4 9.4 0 013.14-1.13c1.12-.2 2.26-.25 3.4-.23l3.45.06 13.8.2 6.9.1c1.91-.02 3.76.33 5.45 1v-.04h3.16a15.92 15.92 0 00-7.72-2.1zM49 4.22c1.23.83 2.26 1.86 3 3.04a9.83 9.83 0 011.42 5.49v.03c0 .5.47.91 1.04.9.57 0 1.02-.42 1.01-.93-.04-2.17-.62-4.4-1.92-6.3a11.26 11.26 0 00-2.02-2.23zm14.21 11.6c-3.08 0-6.07.04-9.11.05L35.92 16l-4.04.02v.55l4.04.02 18.17.17c3.02.04 6.1.04 9.06.1 1.44.09 2.9.37 4.25.82.6.2 1.17.45 1.7.74.31-.34.68-.6 1.08-.79l-.16-.1c-.7-.39-1.44-.67-2.19-.91-1.5-.46-3.03-.73-4.62-.8zm-35.77.22l-20.09.1v.27l20.09.13zM73.86 22.75a2.28 3.92 0 01-2.28 3.92 2.28 3.92 0 01-2.28-3.92 2.28 3.92 0 012.28-3.92 2.28 3.92 0 012.28 3.92z\"\n      />\n    </svg>\n  );\n});\n\nconst Shape5 = memo(function Shape5({\n  className,\n  width,\n  height,\n  color,\n}: ShapeProps) {\n  return (\n    <svg\n      className={className}\n      width={width}\n      height={height}\n      viewBox=\"0 0 80 48\"\n    >\n      <path\n        fill={color}\n        d=\"M5.294 38.132c-4.747 0-6.646-2.968-4.272-5.937.237-4.151.949-28.125 11.037-29.193C14.313.629 13.008.035 33.777.035s19.7 1.186 21.48 3.56c3.086 1.068 5.578 1.306 9.257 17.09 6.053 0 12.579-.831 14.006 12.461 2.254 1.188 2.254 5.578-2.256 5.695-5.816.121-70.97-.709-70.97-.709z\"\n      />\n      <path\n        fill=\"#d5f6ff\"\n        d=\"M62.734 21.672a2.693 2.693 0 01-2.691 2.692H42.521a2.691 2.691 0 01-2.691-2.692V7.474a2.692 2.692 0 012.691-2.692h10.521c1.485 0 3.958-.052 5.776 5.104 1.424 4.034 3.916 11.786 3.916 11.786z\"\n      />\n      <path\n        fill=\"#ffffff\"\n        d=\"M4.227 26.207c-.852 0-1.543.612-1.543 1.367v2.842c0 .757.69 1.37 1.543 1.37.85 0 1.543-.613 1.543-1.37v-2.842c0-.755-.691-1.367-1.543-1.367zM74.9 28.119c-.82 0-1.482.497-1.482 1.106v3.884c0 .61.662 1.104 1.482 1.104.818 0 1.483-.495 1.483-1.104v-3.884c0-.61-.665-1.106-1.483-1.106zM14.742 3.477c-.747.005-1.537.07-2.293.302a6.178 6.178 0 00-2.08 1.106c-1.227.987-2.064 2.306-2.717 3.648A21.455 21.455 0 006.6 12.852c.567-1.354 1.147-2.697 1.906-3.907.617-1.268 1.397-2.469 2.457-3.318 1.054-.87 2.379-1.221 3.79-1.201 1.438 0 2.906.043 4.36.07l8.752.182 4.38.076c1.46-.14 2.922-.248 4.38-.447-1.458-.2-2.914-.335-4.37-.512l-4.372-.066-8.748-.182c-1.462-.03-2.912-.07-4.393-.07zM68.328 22.37a12.253 12.253 0 00-2.822.262c1.855.372 3.7.506 5.348 1.123a6.838 6.838 0 012.232 1.297c.656.577 1.188 1.31 1.674 2.127a5.054 5.054 0 00-1.147-2.635c-.635-.773-1.514-1.327-2.435-1.672a8.973 8.973 0 00-2.85-.502z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M60.117 29.15a9.63 9.63 0 017.424.771 9.644 9.644 0 013.895 4.024 9.515 9.515 0 011.055 4.47c0 .274-.01.537-.038.81a10.917 10.917 0 01-.272 1.553 9.605 9.605 0 01-3.5 5.24c-1.607 1.241-3.621 1.898-5.645 1.946h-.271c-2.023-.057-4.027-.715-5.627-1.956-1.807-1.354-3.085-3.378-3.574-5.578a10.327 10.327 0 01-.217-1.592 13.257 13.257 0 010-.846 9.785 9.785 0 011.063-4.104c1.176-2.256 3.272-4.017 5.709-4.75l-.002.012z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M55.038 38.436c0-3.463 2.428-6.736 5.683-7.828-.519.537-1.147.94-1.619 1.517-2.397 2.672-3.207 6.567-2.36 10.028.18.826.536 1.599.838 2.389-1.618-1.57-2.597-3.829-2.531-6.105h-.011v-.001zM62.555 34.766c2.09-.348 4.205 1.401 4.252 3.527.16 1.893-1.354 3.689-3.217 3.934-2.089.366-4.215-1.4-4.253-3.519-.16-1.892 1.354-3.707 3.218-3.933v-.009z\"\n      />\n      <path\n        fill=\"#050708\"\n        d=\"M19.666 29.15a9.628 9.628 0 017.423.771 9.62 9.62 0 013.895 4.024 9.478 9.478 0 011.054 4.47c0 .274-.009.537-.038.81a9.614 9.614 0 01-3.772 6.793c-1.609 1.241-3.623 1.898-5.645 1.946h-.273c-2.023-.057-4.027-.715-5.626-1.956-1.806-1.354-3.085-3.378-3.575-5.578a10.086 10.086 0 01-.216-1.592 13.257 13.257 0 010-.846 9.77 9.77 0 011.063-4.104c1.176-2.256 3.273-4.017 5.709-4.75l.001.012z\"\n      />\n      <path\n        fill=\"#323332\"\n        d=\"M14.586 38.436c0-3.463 2.427-6.736 5.682-7.828-.518.537-1.148.94-1.619 1.517-2.398 2.672-3.208 6.567-2.361 10.028.179.826.536 1.599.838 2.389-1.619-1.57-2.597-3.829-2.531-6.105h-.009v-.001zM22.103 34.766c2.089-.348 4.206 1.401 4.252 3.527.16 1.893-1.355 3.689-3.217 3.934-2.088.366-4.214-1.4-4.252-3.519-.16-1.892 1.355-3.707 3.217-3.933v-.009z\"\n      />\n    </svg>\n  );\n});\n\nconst shapes: readonly FunctionComponent<ShapeProps>[] = [\n  Shape0,\n  Shape1,\n  Shape2,\n  Shape3,\n  Shape4,\n  Shape5,\n];\n\nexport type CarImageProps = {\n  className?: ClassName;\n  width?: number;\n  height?: number;\n  seed: number;\n};\n\nexport const CarImage = memo(function CarImage({\n  className,\n  width = 80,\n  height = 48,\n  seed,\n}: CarImageProps) {\n  const random = LCG(seed);\n  const color = randomSample(colors, random);\n  const Shape = randomSample(shapes, random);\n  return (\n    <Shape //\n      className={className}\n      width={width}\n      height={height}\n      color={color}\n    />\n  );\n});\n","// extracted by mini-css-extract-plugin\nvar _1 = \"pUClIg2zOE\";\nvar _2 = \"BEHNgtAdPt\";\nvar _3 = \"YieoDKzY_T\";\nvar _4 = \"HoUzKOdjbI\";\nvar _5 = \"_8wVMjHqQdw\";\nvar _6 = \"GI0HT7PAXo\";\nvar _7 = \"y0icbDbwRW\";\nvar _8 = \"J4pKeOTdy8\";\nvar _9 = \"nT1zGGBNt7\";\nvar _a = \"J0I49RooGW\";\nvar _b = \"EohRFyXxTb\";\nvar _c = \"u2Es7_fux9\";\nexport { _1 as \"car\", _2 as \"carImage\", _3 as \"details\", _4 as \"isFiller\", _5 as \"isFinished\", _6 as \"isMe\", _7 as \"isSpectator\", _8 as \"lane\", _9 as \"name\", _a as \"player\", _b as \"pulseAnimation\", _c as \"wideValue\" }\n","import { useIntlNumbers } from \"@keybr/intl\";\nimport { type Player, positionName } from \"@keybr/multiplayer-shared\";\nimport { UserName } from \"@keybr/pages-shared\";\nimport { NameValue, Value } from \"@keybr/widget\";\nimport { clsx } from \"clsx\";\nimport { memo, useEffect, useRef } from \"react\";\nimport { useIntl } from \"react-intl\";\nimport { CarImage } from \"./image/car.tsx\";\nimport * as styles from \"./Lane.module.less\";\n\nexport const Lane = memo(function Lane({\n  player,\n  me,\n}: {\n  player: Player;\n  me: Player;\n}) {\n  const { speed, errors, position, progress } = player;\n  const { formatMessage } = useIntl();\n  const { formatNumber, formatPercents } = useIntlNumbers();\n  const refLane = useRef<HTMLDivElement>(null);\n  const refCar = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const lane = refLane.current;\n    const car = refCar.current;\n    if (lane != null && car != null) {\n      const laneWidth = lane.offsetWidth;\n      const carWidth = car.offsetWidth;\n      car.style.insetInlineStart = `${(laneWidth - carWidth) * progress}px`;\n    }\n  }, [progress]);\n  return (\n    <div\n      className={clsx(\n        styles.player,\n        player.finished && styles.isFinished,\n        player.spectator && styles.isSpectator,\n        player === me && styles.isMe,\n      )}\n    >\n      <div className={styles.name}>\n        <UserName user={player.user} />\n      </div>\n      <div ref={refLane} className={styles.lane}>\n        <div ref={refCar} className={styles.car}>\n          <CarImage className={styles.carImage} seed={player.id} />\n        </div>\n      </div>\n      <div className={styles.details}>\n        <NameValue\n          title={formatMessage({\n            id: \"multiplayer.track.position.description\",\n            defaultMessage: \"Position on the track.\",\n          })}\n          name={formatMessage({\n            id: \"multiplayer.track.position.label\",\n            defaultMessage: \"Position\",\n          })}\n          value={\n            <Value //\n              className={styles.wideValue}\n              value={positionName(position)}\n            />\n          }\n        />\n        <NameValue\n          title={formatMessage({\n            id: \"multiplayer.track.distance.description\",\n            defaultMessage: \"Distance completed.\",\n          })}\n          name={formatMessage({\n            id: \"multiplayer.track.distance.label\",\n            defaultMessage: \"Progress\",\n          })}\n          value={\n            <Value //\n              className={styles.wideValue}\n              value={formatPercents(progress, 1)}\n            />\n          }\n        />\n        <NameValue\n          title={formatMessage({\n            id: \"multiplayer.track.name.description\",\n            defaultMessage: \"Typing speed.\",\n          })}\n          name={formatMessage({\n            id: \"multiplayer.track.name.label\",\n            defaultMessage: \"Speed\",\n          })}\n          value={\n            <Value //\n              className={styles.wideValue}\n              value={formatNumber(speed)}\n            />\n          }\n        />\n        <NameValue\n          title={formatMessage({\n            id: \"multiplayer.track.errors.description\",\n            defaultMessage: \"Number of errors.\",\n          })}\n          name={formatMessage({\n            id: \"multiplayer.track.errors.label\",\n            defaultMessage: \"Errors\",\n          })}\n          value={\n            <Value //\n              className={styles.wideValue}\n              value={formatNumber(errors)}\n            />\n          }\n        />\n      </div>\n    </div>\n  );\n});\n\nexport const FillerLane = memo(function FillerLane() {\n  return <div className={clsx(styles.player, styles.isFiller)} />;\n});\n","import { type Player, type PlayerList } from \"@keybr/multiplayer-shared\";\nimport { withDeferred } from \"@keybr/widget\";\nimport { memo } from \"react\";\nimport { FlagImage } from \"./image/flag.tsx\";\nimport { FillerLane, Lane } from \"./Lane.tsx\";\nimport * as styles from \"./Track.module.less\";\n\nexport const Track = memo(function Track({\n  ticker,\n  players: { all, me },\n}: {\n  ticker: string;\n  players: PlayerList;\n}) {\n  return (\n    <div className={styles.track}>\n      <div className={styles.ticker}>{ticker}</div>\n      {fillerLanes(all).map((id) => (\n        <FillerLane key={id} />\n      ))}\n      {sortLanes(all, me).map((player) => (\n        <Lane key={player.id} player={player} me={me} />\n      ))}\n      {me.finished && (\n        <div className={styles.center}>\n          <FlagImage className={styles.flagImage} />\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport const DeferredTrack = withDeferred(Track);\n\nfunction sortLanes(all: readonly Player[], me: Player): Player[] {\n  return [...all].sort((a, b) => {\n    // Put me on the last lane.\n    if (a === me) {\n      return +1;\n    }\n    if (b === me) {\n      return -1;\n    }\n    // Keep older players closer to me.\n    return b.id - a.id;\n  });\n}\n\nfunction fillerLanes(players: readonly Player[]): string[] {\n  const keys = [];\n  while (keys.length + players.length < 5) {\n    keys.push(`filler-${keys.length}`);\n  }\n  return keys;\n}\n","// extracted by mini-css-extract-plugin\nvar _1 = \"d4xyJ3JUic\";\nvar _2 = \"kEOaZ1kpjG\";\nvar _3 = \"TOGH16n0cC\";\nvar _4 = \"InpzMjNHt5\";\nexport { _1 as \"center\", _2 as \"flagImage\", _3 as \"ticker\", _4 as \"track\" }\n","import { EventEmitter } from \"@keybr/lang\";\nimport {\n  type ClientMessage,\n  GameState,\n  handleTextInput,\n  makeWorldState,\n  PLAYER_ANNOUNCE_ID,\n  PLAYER_PROGRESS_ID,\n  type ServerMessage,\n  updateWorldState,\n  type WorldState,\n} from \"@keybr/multiplayer-shared\";\nimport { useSettings } from \"@keybr/settings\";\nimport { toTextDisplaySettings } from \"@keybr/textinput\";\nimport { type IInputEvent } from \"@keybr/textinput-events\";\nimport { TextArea } from \"@keybr/textinput-ui\";\nimport { type Focusable, useScreenSize } from \"@keybr/widget\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { type IntlShape, useIntl } from \"react-intl\";\nimport * as styles from \"./Game.module.less\";\nimport { DeferredTrack } from \"./Track.tsx\";\nimport { type Transport } from \"./transport.ts\";\n\nconst handleFocus = () => {};\nconst handleBlur = () => {};\nconst WORLD_CHANGE_EVENT = \"world-change\";\n\nexport const Game = ({\n  transport,\n}: {\n  transport: Transport<ServerMessage, ClientMessage>;\n}) => {\n  const intl = useIntl();\n  const wrapper = useMemo(\n    () => new WorldStateWrapper(transport, intl),\n    [transport, intl],\n  );\n  const [worldState, setWorldState] = useState(wrapper.worldState);\n  const focusRef = useRef<Focusable>(null);\n  useEffect(() => {\n    const eventListener = () => {\n      setWorldState(wrapper.worldState);\n      switch (wrapper.worldState.gameState) {\n        case GameState.STARTING:\n        case GameState.RUNNING: {\n          focusRef.current?.focus();\n          break;\n        }\n      }\n    };\n    wrapper.on(WORLD_CHANGE_EVENT, eventListener);\n    wrapper.connect();\n    return () => {\n      wrapper.off(WORLD_CHANGE_EVENT, eventListener);\n      wrapper.disconnect();\n    };\n  }, [wrapper]);\n  const { settings } = useSettings();\n  const textDisplaySettings = useMemo(\n    () => toTextDisplaySettings(settings),\n    [settings],\n  );\n  useScreenSize(); // Repaint on window resize.\n  const { ticker, players, lines } = worldState;\n  return (\n    <div className={styles.game}>\n      <DeferredTrack ticker={ticker} players={players} />\n      <div className={styles.textArea}>\n        <TextArea\n          focusRef={focusRef}\n          settings={textDisplaySettings}\n          lines={lines}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          onInput={wrapper.handleInput}\n        />\n      </div>\n    </div>\n  );\n};\n\nclass WorldStateWrapper extends EventEmitter {\n  #worldState: WorldState;\n\n  constructor(\n    readonly transport: Transport<ServerMessage, ClientMessage>,\n    readonly intl: IntlShape,\n  ) {\n    super();\n    this.#worldState = makeWorldState(this.intl);\n  }\n\n  get worldState(): WorldState {\n    return this.#worldState;\n  }\n\n  setWorldState(worldState: WorldState) {\n    this.#worldState = worldState;\n    this.emit(WORLD_CHANGE_EVENT, worldState);\n  }\n\n  handleReceive = (message: ServerMessage) => {\n    this.setWorldState(updateWorldState(this.intl, this.#worldState, message));\n  };\n\n  handleInput = ({ inputType, codePoint }: IInputEvent) => {\n    if (inputType === \"appendChar\") {\n      const result = handleTextInput(this.#worldState, codePoint);\n      if (result != null) {\n        const { worldState, elapsed } = result;\n        this.setWorldState(worldState);\n        this.transport.send({\n          type: PLAYER_PROGRESS_ID,\n          elapsed,\n          codePoint,\n        });\n      }\n    }\n  };\n\n  connect() {\n    this.transport.addReceiver(this.handleReceive);\n    this.transport.send({\n      type: PLAYER_ANNOUNCE_ID,\n      signature: 0xdeadbabe,\n    });\n  }\n\n  disconnect() {\n    this.transport.removeReceiver(this.handleReceive);\n  }\n}\n","// extracted by mini-css-extract-plugin\nvar _1 = \"nFkIT_B_Oa\";\nvar _2 = \"E4CXHV3Sec\";\nexport { _1 as \"game\", _2 as \"textArea\" }\n","import { type Codec } from \"@keybr/multiplayer-shared\";\nimport { type Transport } from \"./transport.ts\";\n\nexport class WebSocketTransport<ServerMessage, ClientMessage>\n  implements Transport<ServerMessage, ClientMessage>\n{\n  readonly #listeners = new Set<{\n    (event: MessageEvent): void;\n    receiver: (...args: any) => void;\n  }>();\n  readonly #webSocket: WebSocket;\n  readonly #codec: Codec<ServerMessage, ClientMessage>;\n\n  constructor(\n    webSocket: WebSocket,\n    codec: Codec<ServerMessage, ClientMessage>,\n  ) {\n    this.#webSocket = webSocket;\n    this.#codec = codec;\n    this.#webSocket.binaryType = \"arraybuffer\";\n  }\n\n  addReceiver(receiver: (message: ServerMessage) => void): void {\n    const listener = (event: MessageEvent): void => {\n      let message;\n      try {\n        message = this.#codec.decode(new Uint8Array(event.data));\n      } catch (err: any) {\n        this.close(4000, err.message);\n        throw err;\n      }\n      receiver(message);\n    };\n    listener.receiver = receiver;\n    this.#webSocket.addEventListener(\"message\", listener);\n    this.#listeners.add(listener);\n  }\n\n  removeReceiver(receiver: (message: ServerMessage) => void): void {\n    for (const listener of this.#listeners) {\n      if (listener.receiver === receiver) {\n        this.#webSocket.removeEventListener(\"message\", listener);\n        this.#listeners.delete(listener);\n      }\n    }\n  }\n\n  send(message: ClientMessage): void {\n    let data;\n    try {\n      data = this.#codec.encode(message);\n    } catch (err: any) {\n      this.close(4000, err.message);\n      throw err;\n    }\n    this.#webSocket.send(data);\n  }\n\n  close(code?: number, reason?: string): void {\n    this.#webSocket.close(code, reason);\n  }\n}\n","import { Tasks } from \"@keybr/lang\";\nimport { PLAYER_KICKED } from \"@keybr/multiplayer-shared\";\nimport { useEffect, useState } from \"react\";\n\nexport function useWebSocket() {\n  const [state, setState] = useState({\n    webSocket: null,\n    readyState: WebSocket.CONNECTING,\n    kicked: false,\n  } as {\n    webSocket: WebSocket | null;\n    readyState: number;\n    kicked: boolean;\n  });\n\n  useEffect(() => {\n    const tasks = new Tasks();\n    let webSocket: WebSocket | null = null;\n\n    const connect = () => {\n      const makeWebSocket = (webSocket = useWebSocket.makeWebSocket());\n\n      makeWebSocket.addEventListener(\"open\", () => {\n        console.log(\"WebSocket connected\");\n        setState({\n          webSocket: (webSocket = makeWebSocket),\n          readyState: WebSocket.OPEN,\n          kicked: false,\n        });\n      });\n\n      makeWebSocket.addEventListener(\"close\", (ev) => {\n        console.log(`WebSocket closed; code=${ev.code}, reason='${ev.reason}'`);\n        setState({\n          webSocket: (webSocket = null),\n          readyState: WebSocket.CLOSED,\n          kicked: ev.code === PLAYER_KICKED,\n        });\n        switch (ev.code) {\n          case 1006: // CLOSE_ABNORMAL\n          case 1012: // Service Restart\n          case 1013: // Try Again Later\n            tasks.delayed(3000, () => {\n              connect();\n            });\n            break;\n        }\n      });\n\n      makeWebSocket.addEventListener(\"error\", () => {\n        console.error(\"WebSocket error\");\n        makeWebSocket.close();\n      });\n    };\n\n    connect();\n\n    return () => {\n      if (webSocket != null) {\n        webSocket.close();\n        webSocket = null;\n      }\n      tasks.cancelAll();\n    };\n  }, []);\n\n  return state;\n}\n\nuseWebSocket.makeWebSocket = () => {\n  return new WebSocket(webSocketUrl());\n};\n\nfunction webSocketUrl() {\n  const { protocol, host } = window.location;\n  let scheme = \"\";\n  switch (protocol) {\n    case \"https:\":\n      scheme = \"wss:\";\n      break;\n    case \"http:\":\n      scheme = \"ws:\";\n      break;\n    default:\n      throw new Error();\n  }\n  return `${scheme}//${host}/_/game/server`;\n}\n","import { ClientCodec } from \"@keybr/multiplayer-shared\";\nimport { Article, Para } from \"@keybr/widget\";\nimport { useMemo } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Game } from \"./Game.tsx\";\nimport { WebSocketTransport } from \"./transport.websocket.ts\";\nimport { useWebSocket } from \"./websocket-hooks.ts\";\n\nexport function Connector() {\n  const { transport, readyState, kicked } = useTransport();\n  switch (readyState) {\n    case WebSocket.CONNECTING:\n      return <Connecting />;\n    case WebSocket.OPEN:\n      return (\n        <>\n          <Banner />\n          <Game transport={transport!} />\n        </>\n      );\n    default:\n      if (kicked) {\n        return <Kicked />;\n      } else {\n        return <Offline />;\n      }\n  }\n}\n\nfunction useTransport() {\n  const { webSocket, readyState, kicked } = useWebSocket();\n  const transport = useMemo(() => {\n    return webSocket != null\n      ? new WebSocketTransport(webSocket, new ClientCodec())\n      : null;\n  }, [webSocket]);\n  return { transport, readyState, kicked };\n}\n\nfunction Banner() {\n  return (\n    <Para align=\"center\">\n      <FormattedMessage\n        id=\"multiplayer.intro.description\"\n        defaultMessage=\"Compete against other players in this online multiplayer game. The faster you type, the faster your car goes. Type as fast as you can to win the race!\"\n      />\n    </Para>\n  );\n}\n\nfunction Connecting() {\n  return (\n    <Article>\n      <FormattedMessage\n        id=\"multiplayer.state.connecting\"\n        defaultMessage={\n          \"<h1>Connecting to Server...</h1>\" +\n          \"<p>Establishing connection to the game server.</p>\"\n        }\n      />\n    </Article>\n  );\n}\n\nfunction Offline() {\n  return (\n    <Article>\n      <FormattedMessage\n        id=\"multiplayer.state.offline\"\n        defaultMessage={\n          \"<h1>Server is Offline</h1>\" +\n          \"<p>Something is wrong with our game server.</p>\" +\n          \"<p>Please revisit this site in a few minutes while we are fixing the problem.</p>\"\n        }\n      />\n    </Article>\n  );\n}\n\nfunction Kicked() {\n  return (\n    <Article>\n      <FormattedMessage\n        id=\"multiplayer.state.kicked\"\n        defaultMessage={\n          \"<h1>Kicked out of the Game</h1>\" +\n          \"<p>You were kicked out of the game for being inactive.</p>\"\n        }\n      />\n    </Article>\n  );\n}\n","import { Connector } from \"@keybr/multiplayer-ui\";\n\nexport function MultiplayerPage() {\n  return <Connector />;\n}\n","import { MultiplayerPage } from \"@keybr/page-multiplayer\";\nimport { ResultLoader } from \"@keybr/result-loader\";\n\nexport default function Page() {\n  return (\n    <ResultLoader>\n      <MultiplayerPage />\n    </ResultLoader>\n  );\n}\n"],"names":["readUser","reader","id","getString","name","imageUrl","premium","getUint8","Error","constructor","message","options","super","Symbol","toStringTag","PLAYER_KICKED","GameState","ClientCodec","decode","data","type","joinedId","getUint32","players","count","user","push","readPlayerJoin","leftId","readPlayerLeave","text","readGameConfig","gameState","countDown","readGameReady","elapsed","playerState","Map","flags","position","offset","getUint16","speed","errors","spectator","Boolean","finished","set","readGameWorld","encode","writer","putUint8","putUint32","signature","buffer","writePlayerAnnounce","codePoint","writePlayerProgress","positionName","NOBODY","Object","freeze","progress","makeTextInput","stopOnError","forgiveErrors","spaceSkipsWords","updateWorldState","intl","worldState","all","mergePlayers","me","length","findMe","handlePlayerJoinMessage","handlePlayerLeaveMessage","textInput","lines","handleGameConfigMessage","WAITING","resetPlayers","ticker","formatMessage","STARTING","RUNNING","timer","FINISHED","handleGameReadyMessage","map","player","entries","get","values","updatePlayerStates","handleGameWorldMessage","list","snapshot","curr","next","delete","find","FlagImage","memo","className","width","height","viewBox","fill","d","stroke","strokeWidth","strokeLinecap","colors","shapes","color","opacity","CarImage","seed","random","Shape","_a","_c","Lane","useIntl","formatNumber","formatPercents","refLane","useRef","refCar","useEffect","lane","current","car","laneWidth","offsetWidth","carWidth","style","insetInlineStart","clsx","ref","NameValue","title","value","FillerLane","Track","fillerLanes","sortLanes","DeferredTrack","sort","a","b","keys","handleFocus","handleBlur","WORLD_CHANGE_EVENT","Game","transport","wrapper","useMemo","WorldStateWrapper","setWorldState","useState","focusRef","eventListener","focus","on","connect","off","disconnect","settings","textDisplaySettings","onFocus","onBlur","onInput","handleInput","this","INITIALIZING","makeWorldState","emit","handleReceive","inputType","result","Math","trunc","appendChar","handleTextInput","send","addReceiver","removeReceiver","WebSocketTransport","Set","webSocket","codec","binaryType","receiver","listener","event","Uint8Array","err","close","addEventListener","add","removeEventListener","code","reason","useWebSocket","state","setState","readyState","WebSocket","CONNECTING","kicked","tasks","makeWebSocket","console","log","OPEN","ev","CLOSED","delayed","error","cancelAll","Connector","useTransport","Connecting","Banner","Kicked","Offline","Para","align","Article","MultiplayerPage","protocol","host","window","location","scheme","webSocketUrl","Page"],"sourceRoot":""}