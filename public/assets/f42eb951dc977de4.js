"use strict";(self.webpackChunkkeybr_com=self.webpackChunkkeybr_com||[]).push([[948],{948:(e,n,s)=>{s.r(n),s.d(n,{default:()=>M});var t=s(4922),c=s(2352),i=s(4976),l=s(2572),a=s(9071),r=s(8404),o=s(6050),u=s(6681),d=s(203),j=s(4692),x=s(1863),h=s(3227);function m({user:e}){const{formatMessage:n}=(0,j.A)();return(0,t.jsx)(h.Y,{level:1,children:(0,t.jsx)(x.A,{id:"6riUUenK",values:{name:e?.name??n({id:"kKAPO6bw"})}})})}var p=s(6858),g=s(7810),A=s(1739),f=s(3642);let k=null;function b(){return null==k&&(k=new Promise(((e,n)=>{const s=document.createElement("script");s.onload=()=>{const s=(0,f.um)("v1");null!=s&&"object"==typeof s?(s.Environment.set("production"),s.Initialize({token:p.sg}),e(s)):n(new Error("Cannot initialize Paddle"))},s.onerror=()=>{n(new Error("Cannot load Paddle"))},s.src="https://cdn.paddle.com/paddle/v2/paddle.js",document.head.appendChild(s)}))),k}function w(){const e=function(){const[e,n]=(0,g.useState)(null);return(0,g.useEffect)((()=>{let e=!1;return b().then((s=>{e||n(s)})).catch(A.WL),()=>{e=!0}}),[]),e}(),[n,s]=(0,g.useState)(null);(0,g.useEffect)((()=>{let n=!1;return null!=e&&e.PricePreview({items:[{priceId:p.T0,quantity:1}]}).then((e=>{n||s(e)})),()=>{n=!0}}),[e]);const[c=null]=n?.data?.details?.lineItems??[];return(0,t.jsxs)(a.l,{children:["Premium account price: ",c?.formattedTotals?.total??"..."]})}function v({user:e,publicUser:n,actions:s}){const{formatMessage:h}=(0,j.A)();return(0,t.jsxs)(i.n,{children:[(0,t.jsx)(m,{user:e}),(0,t.jsx)(x.A,{id:"JBP+Gtsy"}),(0,t.jsxs)(l.nV,{legend:h({id:"ZBKqVHzv"}),children:[(0,t.jsx)(a.l,{children:(0,t.jsx)(c.xE,{user:n})}),(0,t.jsx)(a.l,{children:(0,t.jsx)(x.A,{id:"I6AdvAET"})}),(0,t.jsx)(a.l,{children:(0,t.jsx)(r.o,{label:h({id:"x7XDP98/"}),checked:e.anonymized,onChange:()=>{s.patchAccount({anonymized:!e.anonymized})}})}),(0,t.jsx)(a.l,{children:(0,t.jsx)(x.A,{id:"bmchRmge"})}),(0,t.jsx)(a.l,{children:(0,t.jsx)(o.$,{onClick:()=>{s.logout()},icon:(0,t.jsx)(u.I,{shape:d.Vwh}),label:h({id:"2oCxVchR"})})})]}),(0,t.jsx)(l.nV,{legend:h({id:"Yktgmywr"}),children:(0,c.V_)(n)?(0,t.jsx)(x.A,{id:"YxTxiIQN"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{id:"uHKgk+Rv"}),(0,t.jsx)(w,{}),(0,t.jsx)(a.l,{children:(0,t.jsx)(o.$,{onClick:()=>{s.checkout()},icon:(0,t.jsx)(u.I,{shape:d.EnP}),label:h({id:"HS5JH3/P"})})})]})}),(0,t.jsxs)(l.nV,{legend:h({id:"sSLpsocn"}),children:[(0,t.jsx)(a.l,{children:(0,t.jsx)(o.$,{onClick:()=>{s.deleteAccount()},icon:(0,t.jsx)(u.I,{shape:d.jq2}),label:h({id:"zQpity23"})})}),(0,t.jsx)(a.l,{children:(0,t.jsx)(x.A,{id:"a8UtwhR1"})})]})]})}var C,E=s(9414);function y(e){const{formatMessage:n}=(0,j.A)(),[{user:s,publicUser:t},c]=(0,g.useState)(e);return{user:s,publicUser:t,actions:{patchAccount:e=>{C.patchAccount(e).then((({user:e,publicUser:n})=>{c({user:e,publicUser:n})})).catch(A.WL)},deleteAccount:()=>{const e=n({id:"GD3rLsY5"});window.confirm(e)&&C.deleteAccount().then((()=>{z("/")})).catch(A.WL)},logout:()=>{z("/auth/logout")},checkout:()=>{(function({id:e,email:n}){return b().then((s=>{s.Checkout.open({settings:{displayMode:"overlay",variant:"one-page",allowLogout:!1},customer:{email:n},items:[{priceId:p.T0,quantity:1}],customData:{id:e}})}))})(s).catch(A.WL)}}}}function z(e){window.location.href=e}!function(e){e.registerEmail=async function(e){const n=await E.Em.use((0,E.eA)("application/json")).POST("/auth/login/register-email").send({email:e});return await n.json()},e.patchAccount=async function(e){const n=await E.Em.use((0,E.eA)("application/json")).PATCH("/_/account").send(e);return await n.json()},e.deleteAccount=async function(){const e=await E.Em.DELETE("/_/account").send();await e.blob()}}(C||(C={}));var I=s(564),P=s(5031);function U({actions:e}){const{formatMessage:n}=(0,j.A)(),[s,c]=(0,g.useState)(""),[{state:i,message:l},r]=(0,g.useState)({state:"normal",message:null}),h=e=>{c(e)},m=()=>{""!==s&&(r({state:"sending",message:null}),e.registerEmail(s.trim()).then((()=>{r({state:"success",message:null})})).catch((e=>{r({state:"error",message:e.message})})))},p=()=>{r({state:"normal",message:null})};switch(i){case"sending":return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.l,{children:(0,t.jsx)(x.A,{id:"UM6xodpA",values:{email:s}})})});case"success":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.l,{children:(0,t.jsx)(x.A,{id:"T43RSn+2",values:{email:s}})}),(0,t.jsx)(a.l,{children:(0,t.jsx)(o.$,{size:16,icon:(0,t.jsx)(u.I,{shape:d._kW}),label:n({id:"MkBgkAQI"}),onClick:p})})]});case"error":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.l,{children:(0,t.jsx)(x.A,{id:"fGY2HBG0",values:{email:s,message:l}})}),(0,t.jsx)(a.l,{children:(0,t.jsx)(o.$,{size:16,icon:(0,t.jsx)(u.I,{shape:d._kW}),label:n({id:"kFusSXHS"}),onClick:p})})]});default:return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(I.d,{children:[(0,t.jsx)(I.D,{children:(0,t.jsx)(P.A,{size:24,type:"email",placeholder:n({id:"BkWdCcdl"}),value:s,onChange:h})}),(0,t.jsx)(I.D,{children:(0,t.jsx)(o.$,{size:16,icon:(0,t.jsx)(u.I,{shape:d.hI8}),label:n({id:"lzJYudJC"}),onClick:m})})]}),(0,t.jsx)(a.l,{children:(0,t.jsx)(x.A,{id:"NxjowjM7"})})]})}}function S({actions:e}){return(0,t.jsxs)(i.n,{children:[(0,t.jsx)(m,{user:null}),(0,t.jsx)(x.A,{id:"HzzCNqji"}),(0,t.jsx)(h.Y,{level:2,children:(0,t.jsx)(x.A,{id:"ctMmnMm+"})}),(0,t.jsx)(h.Y,{level:2,children:(0,t.jsx)(x.A,{id:"LcSBaT7L"})}),(0,t.jsx)(U,{actions:e})]})}function T(e){const{user:n,publicUser:s,actions:c}=y(e);return(0,t.jsx)(v,{user:n,publicUser:s,actions:c})}function L(){const{actions:e}={actions:{registerEmail:e=>C.registerEmail(e)}};return(0,t.jsx)(S,{actions:e})}const M=function(){const{user:e,publicUser:n}=(0,c.BV)();return null!=e?(0,t.jsx)(T,{user:e,publicUser:n}):(0,t.jsx)(L,{})}},6858:(e,n,s)=>{s.d(n,{T0:()=>i,WN:()=>t,sg:()=>c});const t="0",c="0",i="0"}}]);
//# sourceMappingURL=f42eb951dc977de4.js.map